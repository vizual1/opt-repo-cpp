diff --git a/src/quick-lint-js/fe/global-declared-variable-set.cpp b/src/quick-lint-js/fe/global-declared-variable-set.cpp
index c5438a76..40aa304b 100644
--- a/src/quick-lint-js/fe/global-declared-variable-set.cpp
+++ b/src/quick-lint-js/fe/global-declared-variable-set.cpp
@@ -2,7 +2,7 @@
 // See end of file for extended copyright information.
 
 #include <optional>
-#include <quick-lint-js/container/hash-set.h>
+
 #include <quick-lint-js/fe/global-declared-variable-set.h>
 #include <quick-lint-js/fe/identifier.h>
 #include <quick-lint-js/fe/language.h>
@@ -26,9 +26,10 @@ void global_declared_variable_set::add_predefined_global_variable(
 
 void global_declared_variable_set::add_global_variable(
     global_declared_variable global_variable) {
+  // Remove any existing declaration, then insert or overwrite with new properties.
   this->undeclare_variable(global_variable.name);
-  this->variables_[global_variable.is_shadowable][global_variable.is_writable]
-      .emplace(global_variable.name);
+  this->variables_.insert_or_assign(global_variable.name,
+                                    std::move(global_variable));
 }
 
 void global_declared_variable_set::add_literally_everything() {
@@ -37,8 +38,8 @@ void global_declared_variable_set::add_literally_everything() {
 
 void global_declared_variable_set::reserve_more_global_variables(
     std::size_t extra_count, bool is_shadowable, bool is_writable) {
-  auto &vars = this->variables_[is_shadowable][is_writable];
-  vars.reserve(vars.size() + extra_count);
+  // No-op: single hash_map grows as needed. Keep function to preserve API.
+  (void)extra_count; (void)is_shadowable; (void)is_writable;
 }
 
 std::optional<global_declared_variable> global_declared_variable_set::find(
@@ -48,23 +49,12 @@ std::optional<global_declared_variable> global_declared_variable_set::find(
 
 std::optional<global_declared_variable> global_declared_variable_set::find(
     string8_view name) const noexcept {
-  for (bool is_shadowable : {false, true}) {
-    for (bool is_writable : {false, true}) {
-      if (this->variables_[is_shadowable][is_writable].contains(name)) {
-        return global_declared_variable{
-            .name = name,
-            .is_writable = is_writable,
-            .is_shadowable = is_shadowable,
-        };
-      }
-    }
+  auto it = this->variables_.find(name);
+  if (it != this->variables_.end()) {
+    return it->second;
   }
   if (this->all_variables_declared_) {
-    return global_declared_variable{
-        .name = name,
-        .is_writable = true,
-        .is_shadowable = true,
-    };
+    return global_declared_variable{.name = name, .is_writable = true, .is_shadowable = true};
   }
   return std::nullopt;
 }
@@ -85,21 +75,15 @@ std::optional<global_declared_variable> global_declared_variable_set::find_type(
 std::vector<string8_view> global_declared_variable_set::get_all_variable_names()
     const {
   std::vector<string8_view> result;
-  for (bool is_shadowable : {false, true}) {
-    for (bool is_writable : {false, true}) {
-      auto &vars = this->variables_[is_shadowable][is_writable];
-      result.insert(result.end(), vars.begin(), vars.end());
-    }
+  result.reserve(this->variables_.size());
+  for (const auto& [name, var] : this->variables_) {
+    result.push_back(name);
   }
   return result;
 }
 
 void global_declared_variable_set::undeclare_variable(string8_view name) {
-  for (bool is_shadowable : {false, true}) {
-    for (bool is_writable : {false, true}) {
-      this->variables_[is_shadowable][is_writable].erase(name);
-    }
-  }
+  this->variables_.erase(name);
 }
 }
 
diff --git a/src/quick-lint-js/fe/global-declared-variable-set.h b/src/quick-lint-js/fe/global-declared-variable-set.h
index 841c8d61..b6ea160f 100644
--- a/src/quick-lint-js/fe/global-declared-variable-set.h
+++ b/src/quick-lint-js/fe/global-declared-variable-set.h
@@ -5,7 +5,7 @@
 #define QUICK_LINT_JS_FE_GLOBAL_DECLARED_VARIABLE_SET_H
 
 #include <optional>
-#include <quick-lint-js/container/hash-set.h>
+#include <quick-lint-js/container/hash-map.h>
 #include <quick-lint-js/fe/identifier.h>
 #include <quick-lint-js/fe/language.h>
 #include <quick-lint-js/port/char8.h>
@@ -53,9 +53,8 @@ class global_declared_variable_set {
  private:
   void undeclare_variable(string8_view name);
 
-  // First index: is_shadowable
-  // Second index: is_writable
-  hash_set<string8_view> variables_[2][2];
+  // Map from variable name to its properties.
+  hash_map<string8_view, global_declared_variable> variables_;
   bool all_variables_declared_ = false;
 };
 }
