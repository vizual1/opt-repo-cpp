diff --git a/src/lint.cpp b/src/lint.cpp
index b8f2e190..6616dbdc 100644
--- a/src/lint.cpp
+++ b/src/lint.cpp
@@ -112,6 +112,18 @@ void global_declared_variable_set::add_global_variable(
       .emplace(global_variable.name);
 }
 
+void global_declared_variable_set::reserve(std::size_t n) {
+  // Distribute the expected number of elements across the four buckets to avoid
+  // repeated rehashing when inserting many globals.
+  std::size_t per_bucket = n / 4 + 1;
+  for (int i = 0; i < 2; ++i) {
+    for (int j = 0; j < 2; ++j) {
+      this->variables_[i][j].reserve(per_bucket);
+    }
+  }
+}
+
+
 std::optional<global_declared_variable> global_declared_variable_set::find(
     identifier name) const noexcept {
   return this->find(name.normalized_name());
diff --git a/src/quick-lint-js/lint.h b/src/quick-lint-js/lint.h
index 8692f505..af84bfb0 100644
--- a/src/quick-lint-js/lint.h
+++ b/src/quick-lint-js/lint.h
@@ -33,6 +33,9 @@ class global_declared_variable_set {
   // is_writable=true), then bad things might happen.
   void add_global_variable(global_declared_variable);
 
+  // Reserve space to avoid repeated rehashing when inserting many globals.
+  void reserve(std::size_t n);
+
   std::optional<global_declared_variable> find(identifier name) const noexcept;
   std::optional<global_declared_variable> find(string8_view name) const
       noexcept;
