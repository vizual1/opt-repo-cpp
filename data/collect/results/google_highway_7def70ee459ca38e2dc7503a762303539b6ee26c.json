{
    "metadata": {
        "collection_date": "2026-01-14T18:41:03.746382",
        "repository": "https://github.com/google/highway",
        "repository_name": "google/highway"
    },
    "commit_info": {
        "old_sha": "490ad6325fafb1f8a322d11e52a05849152d096a",
        "new_sha": "7def70ee459ca38e2dc7503a762303539b6ee26c",
        "commit_message": [
            "avoid cmath in scalar-inl for wasm Godbolt\n\nPiperOrigin-RevId: 497924605"
        ],
        "commit_date": "2022-12-27T10:04:13+00:00",
        "patch": [
            "--- hwy/ops/scalar-inl.h\n@@ -563,11 +563,19 @@ HWY_API Vec1<T> Abs(const Vec1<T> a) {\n   const T i = a.raw;\n   return (i >= 0 || i == hwy::LimitsMin<T>()) ? a : Vec1<T>(static_cast<T>(-i));\n }\n-HWY_API Vec1<float> Abs(const Vec1<float> a) {\n-  return Vec1<float>(fabsf(a.raw));\n+HWY_API Vec1<float> Abs(Vec1<float> a) {\n+  int32_t i;\n+  CopyBytes<sizeof(i)>(&a.raw, &i);\n+  i &= 0x7FFFFFFF;\n+  CopyBytes<sizeof(i)>(&i, &a.raw);\n+  return a;\n }\n-HWY_API Vec1<double> Abs(const Vec1<double> a) {\n-  return Vec1<double>(fabs(a.raw));\n+HWY_API Vec1<double> Abs(Vec1<double> a) {\n+  int64_t i;\n+  CopyBytes<sizeof(i)>(&a.raw, &i);\n+  i &= 0x7FFFFFFFFFFFFFFFL;\n+  CopyBytes<sizeof(i)>(&i, &a.raw);\n+  return a;\n }\n \n // ------------------------------ Min/Max\n@@ -742,10 +750,18 @@ HWY_API Vec1<float> ApproximateReciprocalSqrt(const Vec1<float> v) {\n \n // Square root\n HWY_API Vec1<float> Sqrt(const Vec1<float> v) {\n+#if HWY_COMPILER_GCC && defined(HWY_NO_LIBCXX)\n+  return Vec1<float>(__builtin_sqrt(v.raw));\n+#else\n   return Vec1<float>(sqrtf(v.raw));\n+#endif\n }\n HWY_API Vec1<double> Sqrt(const Vec1<double> v) {\n+#if HWY_COMPILER_GCC && defined(HWY_NO_LIBCXX)\n+  return Vec1<float>(__builtin_sqrt(v.raw));\n+#else\n   return Vec1<double>(sqrt(v.raw));\n+#endif\n }\n \n // ------------------------------ Floating-point rounding\n@@ -1125,17 +1141,17 @@ HWY_API Vec1<ToT> PromoteTo(Sisd<ToT> /* tag */, Vec1<FromT> from) {\n // so we overload for FromT=double and ToT={float,int32_t}.\n HWY_API Vec1<float> DemoteTo(Sisd<float> /* tag */, Vec1<double> from) {\n   // Prevent ubsan errors when converting float to narrower integer/float\n-  if (isinf(from.raw) ||\n-      fabs(from.raw) > static_cast<double>(HighestValue<float>())) {\n+  if (IsInf(from).bits ||\n+      Abs(from).raw > static_cast<double>(HighestValue<float>())) {\n     return Vec1<float>(detail::SignBit(from.raw) ? LowestValue<float>()\n                                                  : HighestValue<float>());\n   }\n   return Vec1<float>(static_cast<float>(from.raw));\n }\n HWY_API Vec1<int32_t> DemoteTo(Sisd<int32_t> /* tag */, Vec1<double> from) {\n   // Prevent ubsan errors when converting int32_t to narrower integer/int32_t\n-  if (isinf(from.raw) ||\n-      fabs(from.raw) > static_cast<double>(HighestValue<int32_t>())) {\n+  if (IsInf(from).bits ||\n+      Abs(from).raw > static_cast<double>(HighestValue<int32_t>())) {\n     return Vec1<int32_t>(detail::SignBit(from.raw) ? LowestValue<int32_t>()\n                                                    : HighestValue<int32_t>());\n   }\n@@ -1231,7 +1247,8 @@ HWY_API Vec1<ToT> ConvertTo(Sisd<ToT> /* tag */, Vec1<FromT> from) {\n   // float## -> int##: return closest representable value. We cannot exactly\n   // represent LimitsMax<ToT> in FromT, so use double.\n   const double f = static_cast<double>(from.raw);\n-  if (isinf(from.raw) || fabs(f) > static_cast<double>(LimitsMax<ToT>())) {\n+  if (IsInf(from).bits ||\n+      Abs(Vec1<double>(f)).raw > static_cast<double>(LimitsMax<ToT>())) {\n     return Vec1<ToT>(detail::SignBit(from.raw) ? LimitsMin<ToT>()\n                                                : LimitsMax<ToT>());\n   }"
        ],
        "files_changed": [
            {
                "filename": "hwy/ops/scalar-inl.h",
                "status": "modified",
                "additions": 26,
                "deletions": 9,
                "changes": 35,
                "patch": "@@ -563,11 +563,19 @@ HWY_API Vec1<T> Abs(const Vec1<T> a) {\n   const T i = a.raw;\n   return (i >= 0 || i == hwy::LimitsMin<T>()) ? a : Vec1<T>(static_cast<T>(-i));\n }\n-HWY_API Vec1<float> Abs(const Vec1<float> a) {\n-  return Vec1<float>(fabsf(a.raw));\n+HWY_API Vec1<float> Abs(Vec1<float> a) {\n+  int32_t i;\n+  CopyBytes<sizeof(i)>(&a.raw, &i);\n+  i &= 0x7FFFFFFF;\n+  CopyBytes<sizeof(i)>(&i, &a.raw);\n+  return a;\n }\n-HWY_API Vec1<double> Abs(const Vec1<double> a) {\n-  return Vec1<double>(fabs(a.raw));\n+HWY_API Vec1<double> Abs(Vec1<double> a) {\n+  int64_t i;\n+  CopyBytes<sizeof(i)>(&a.raw, &i);\n+  i &= 0x7FFFFFFFFFFFFFFFL;\n+  CopyBytes<sizeof(i)>(&i, &a.raw);\n+  return a;\n }\n \n // ------------------------------ Min/Max\n@@ -742,10 +750,18 @@ HWY_API Vec1<float> ApproximateReciprocalSqrt(const Vec1<float> v) {\n \n // Square root\n HWY_API Vec1<float> Sqrt(const Vec1<float> v) {\n+#if HWY_COMPILER_GCC && defined(HWY_NO_LIBCXX)\n+  return Vec1<float>(__builtin_sqrt(v.raw));\n+#else\n   return Vec1<float>(sqrtf(v.raw));\n+#endif\n }\n HWY_API Vec1<double> Sqrt(const Vec1<double> v) {\n+#if HWY_COMPILER_GCC && defined(HWY_NO_LIBCXX)\n+  return Vec1<float>(__builtin_sqrt(v.raw));\n+#else\n   return Vec1<double>(sqrt(v.raw));\n+#endif\n }\n \n // ------------------------------ Floating-point rounding\n@@ -1125,17 +1141,17 @@ HWY_API Vec1<ToT> PromoteTo(Sisd<ToT> /* tag */, Vec1<FromT> from) {\n // so we overload for FromT=double and ToT={float,int32_t}.\n HWY_API Vec1<float> DemoteTo(Sisd<float> /* tag */, Vec1<double> from) {\n   // Prevent ubsan errors when converting float to narrower integer/float\n-  if (isinf(from.raw) ||\n-      fabs(from.raw) > static_cast<double>(HighestValue<float>())) {\n+  if (IsInf(from).bits ||\n+      Abs(from).raw > static_cast<double>(HighestValue<float>())) {\n     return Vec1<float>(detail::SignBit(from.raw) ? LowestValue<float>()\n                                                  : HighestValue<float>());\n   }\n   return Vec1<float>(static_cast<float>(from.raw));\n }\n HWY_API Vec1<int32_t> DemoteTo(Sisd<int32_t> /* tag */, Vec1<double> from) {\n   // Prevent ubsan errors when converting int32_t to narrower integer/int32_t\n-  if (isinf(from.raw) ||\n-      fabs(from.raw) > static_cast<double>(HighestValue<int32_t>())) {\n+  if (IsInf(from).bits ||\n+      Abs(from).raw > static_cast<double>(HighestValue<int32_t>())) {\n     return Vec1<int32_t>(detail::SignBit(from.raw) ? LowestValue<int32_t>()\n                                                    : HighestValue<int32_t>());\n   }\n@@ -1231,7 +1247,8 @@ HWY_API Vec1<ToT> ConvertTo(Sisd<ToT> /* tag */, Vec1<FromT> from) {\n   // float## -> int##: return closest representable value. We cannot exactly\n   // represent LimitsMax<ToT> in FromT, so use double.\n   const double f = static_cast<double>(from.raw);\n-  if (isinf(from.raw) || fabs(f) > static_cast<double>(LimitsMax<ToT>())) {\n+  if (IsInf(from).bits ||\n+      Abs(Vec1<double>(f)).raw > static_cast<double>(LimitsMax<ToT>())) {\n     return Vec1<ToT>(detail::SignBit(from.raw) ? LimitsMin<ToT>()\n                                                : LimitsMax<ToT>());\n   }"
            }
        ],
        "lines_added": 26,
        "lines_removed": 9
    },
    "issues": [],
    "pull_requests": [],
    "build_info": {
        "old_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
            "cmake --build /test_workspace/workspace/old/build -- -j 1"
        ],
        "new_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
            "cmake --build /test_workspace/workspace/new/build -- -j 1"
        ],
        "old_test_script": [
            "cd /test_workspace/workspace/old/build",
            "ctest --output-on-failure"
        ],
        "new_test_script": [
            "cd /test_workspace/workspace/new/build",
            "ctest --output-on-failure"
        ],
        "build_system": "cmake"
    },
    "performance_analysis": {
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 1.0,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999991377003091,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.6022858823800245,
        "relative_improvement": -0.000682070082700983,
        "absolute_improvement_ms": -10.666666666669045,
        "old_mean_ms": 15638.666666666666,
        "new_mean_ms": 15649.333333333334,
        "old_std_ms": 78.94709417173571,
        "new_std_ms": 82.20803439774151,
        "effect_size_cohens_d": -0.13235053349852413,
        "old_ci95_ms": [
            15609.187337223719,
            15668.145996109612
        ],
        "new_ci95_ms": [
            15618.636348798396,
            15680.030317868273
        ],
        "old_ci99_ms": [
            15598.936943190989,
            15678.396390142343
        ],
        "new_ci99_ms": [
            15607.9625582799,
            15690.70410838677
        ],
        "new_times_s": [
            15.64,
            15.7,
            15.62,
            15.62,
            15.67,
            15.51,
            15.62,
            15.72,
            15.57,
            15.55,
            15.65,
            15.62,
            15.58,
            15.52,
            15.89,
            15.74,
            15.72,
            15.56,
            15.66,
            15.63,
            15.63,
            15.72,
            15.63,
            15.63,
            15.69,
            15.66,
            15.54,
            15.61,
            15.74,
            15.71,
            15.77
        ],
        "old_times_s": [
            15.54,
            15.52,
            15.62,
            15.71,
            15.59,
            15.55,
            15.66,
            15.71,
            15.62,
            15.67,
            15.74,
            15.64,
            15.67,
            15.47,
            15.57,
            15.54,
            15.69,
            15.62,
            15.69,
            15.62,
            15.78,
            15.5,
            15.69,
            15.55,
            15.59,
            15.64,
            15.75,
            15.7,
            15.63,
            15.76,
            15.67
        ]
    },
    "tests": {
        "total_tests": 1,
        "significant_improvements": 0,
        "significant_improvements_tests": [],
        "significant_regressions": 0,
        "significant_regressions_tests": [],
        "significant_pair_improvements": 0,
        "significant_pair_improvements_tests": [],
        "significant_pair_regressions": 0,
        "significant_pair_regressions_tests": [],
        "significant_binom_improvements": 0,
        "significant_binom_improvements_tests": [],
        "significant_binom_regressions": 0,
        "significant_binom_regressions_tests": [],
        "significant_wilcoxon_improvements": 0,
        "significant_wilcoxon_improvements_tests": [],
        "significant_wilcoxon_regressions": 0,
        "significant_wilcoxon_regressions_tests": [],
        "significant_mannwhitney_improvements": 0,
        "significant_mannwhitney_improvements_tests": [],
        "significant_mannwhitney_regressions": 0,
        "significant_mannwhitney_regressions_tests": [],
        "tests": [
            {
                "test_name": "NanobenchmarkTest.RunAll",
                "is_significant": false,
                "p_value": 0.8408537180657563,
                "is_pair_significant": false,
                "pair_p_value": 0.8270431645838908,
                "is_binom_significant": false,
                "binom_p_value": 0.5747229903936386,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.7382680288691308,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 0.35717128505811224,
                "relative_improvement": 0.011895910780669157,
                "absolute_improvement_ms": 5.5172413793103114,
                "old_mean_ms": 463.7931034482759,
                "new_mean_ms": 458.2758620689655,
                "old_std_ms": 63.83090345947802,
                "new_std_ms": 72.46028298894117,
                "effect_size_cohens_d": 0.08080075711024791,
                "old_ci95_ms": [
                    439.51312628946874,
                    488.07308060708294
                ],
                "new_ci95_ms": [
                    430.7134444853092,
                    485.8382796526219
                ],
                "old_ci99_ms": [
                    431.0398739103316,
                    496.5463329862201
                ],
                "new_ci99_ms": [
                    421.0946825384606,
                    495.45704159947053
                ],
                "new_times": [
                    0.51,
                    0.49,
                    0.47,
                    0.41,
                    0.51,
                    0.54,
                    0.42,
                    0.44,
                    0.43,
                    0.49,
                    0.45,
                    0.4,
                    0.65,
                    0.48,
                    0.54,
                    0.4,
                    0.39,
                    0.39,
                    0.46,
                    0.59,
                    0.36,
                    0.45,
                    0.47,
                    0.38,
                    0.31,
                    0.37,
                    0.49,
                    0.49,
                    0.51
                ],
                "old_times": [
                    0.43,
                    0.54,
                    0.48,
                    0.45,
                    0.55,
                    0.53,
                    0.44,
                    0.51,
                    0.6,
                    0.46,
                    0.52,
                    0.35,
                    0.42,
                    0.39,
                    0.5,
                    0.44,
                    0.48,
                    0.43,
                    0.56,
                    0.36,
                    0.49,
                    0.39,
                    0.38,
                    0.4,
                    0.49,
                    0.47,
                    0.42,
                    0.54,
                    0.43
                ]
            }
        ]
    },
    "logs": {
        "full_log_path": "/logs/full.log",
        "config_log_path": "/logs/config.log",
        "build_log_path": "/logs/build.log",
        "test_log_path": "/logs/test.log",
        "build_success": true,
        "test_success": true
    },
    "raw_timing_data": {
        "warmup_runs": 1,
        "measurement_runs": 30,
        "min_exec_time_improvement": 0.05,
        "min_p_value": 0.05
    }
}