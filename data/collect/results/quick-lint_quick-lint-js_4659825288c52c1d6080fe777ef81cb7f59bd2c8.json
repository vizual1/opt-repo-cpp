{
    "metadata": {
        "collection_date": "2026-01-14T18:38:05.226018",
        "repository": "https://github.com/quick-lint/quick-lint-js",
        "repository_name": "quick-lint/quick-lint-js"
    },
    "commit_info": {
        "old_sha": "7102c0644364fab8797d20bd6ad2eaee990f5f56",
        "new_sha": "4659825288c52c1d6080fe777ef81cb7f59bd2c8",
        "commit_message": [
            "Optimize buffering_visitor\n\nIn buffering_visitor, use std::deque instead of\nboost::container::small_vector.\n\nPerformance improvement when parsing jQuery:\n\n    Benchmark                                     Time             CPU      Time Old      Time New       CPU Old       CPU New\n    --------------------------------------------------------------------------------------------------------------------------\n    benchmark_parse_file                       -0.0154         -0.0154       1691316       1665299       1691023       1665011\n    benchmark_parse_file                       -0.0160         -0.0160       1693019       1665894       1692718       1665605\n    benchmark_parse_file                       -0.0171         -0.0171       1693589       1664662       1693293       1664347\n    benchmark_parse_file                       -0.0200         -0.0200       1698217       1664208       1697906       1663914\n    benchmark_parse_file                       -0.0218         -0.0217       1697634       1660689       1697330       1660413\n    benchmark_parse_file                       -0.0259         -0.0259       1698697       1654685       1698419       1654411\n    benchmark_parse_file                       -0.0263         -0.0263       1701656       1656910       1701388       1656624\n    benchmark_parse_file                       -0.0236         -0.0236       1698230       1658219       1697954       1657940\n    benchmark_parse_file                       -0.0212         -0.0212       1700343       1664335       1700066       1664058\n    benchmark_parse_file                       -0.0216         -0.0216       1698928       1662197       1698655       1661908\n    benchmark_parse_file_pvalue                 0.0002          0.0002      U Test, Repetitions: 10 vs 10\n    benchmark_parse_file_mean                  -0.0209         -0.0209       1697163       1661710       1696875       1661423\n    benchmark_parse_file_median                -0.0206         -0.0206       1698223       1663202       1697930       1662911\n    benchmark_parse_file_stddev                +0.1615         +0.1566          3372          3917          3381          3911"
        ],
        "commit_date": "2021-12-25T06:40:12+00:00",
        "patch": [
            "--- src/quick-lint-js/buffering-visitor.h\n@@ -5,14 +5,14 @@\n #define QUICK_LINT_JS_BUFFERING_VISITOR_H\n \n #include <boost/container/pmr/memory_resource.hpp>\n+#include <boost/container/pmr/polymorphic_allocator.hpp>\n+#include <deque>\n #include <optional>\n #include <quick-lint-js/language.h>\n #include <quick-lint-js/lex.h>\n #include <quick-lint-js/parse-visitor.h>\n-#include <quick-lint-js/vector.h>\n #include <quick-lint-js/warning.h>\n #include <utility>\n-#include <vector>\n \n QLJS_WARNING_PUSH\n QLJS_WARNING_IGNORE_MSVC(26495)  // Variable is uninitialized.\n@@ -21,7 +21,7 @@ namespace quick_lint_js {\n class buffering_visitor {\n  public:\n   explicit buffering_visitor(boost::container::pmr::memory_resource *memory)\n-      : visits_(\"buffering_visitor\", vector<visit>::allocator_type(memory)) {}\n+      : visits_(memory) {}\n \n   template <QLJS_PARSE_VISITOR Visitor>\n   void move_into(Visitor &target) {\n@@ -253,7 +253,8 @@ class buffering_visitor {\n     };\n   };\n \n-  vector<visit> visits_;\n+  std::deque<visit, boost::container::pmr::polymorphic_allocator<visit>>\n+      visits_;\n };\n QLJS_STATIC_ASSERT_IS_PARSE_VISITOR(buffering_visitor);\n }"
        ],
        "files_changed": [
            {
                "filename": "src/quick-lint-js/buffering-visitor.h",
                "status": "modified",
                "additions": 5,
                "deletions": 4,
                "changes": 9,
                "patch": "@@ -5,14 +5,14 @@\n #define QUICK_LINT_JS_BUFFERING_VISITOR_H\n \n #include <boost/container/pmr/memory_resource.hpp>\n+#include <boost/container/pmr/polymorphic_allocator.hpp>\n+#include <deque>\n #include <optional>\n #include <quick-lint-js/language.h>\n #include <quick-lint-js/lex.h>\n #include <quick-lint-js/parse-visitor.h>\n-#include <quick-lint-js/vector.h>\n #include <quick-lint-js/warning.h>\n #include <utility>\n-#include <vector>\n \n QLJS_WARNING_PUSH\n QLJS_WARNING_IGNORE_MSVC(26495)  // Variable is uninitialized.\n@@ -21,7 +21,7 @@ namespace quick_lint_js {\n class buffering_visitor {\n  public:\n   explicit buffering_visitor(boost::container::pmr::memory_resource *memory)\n-      : visits_(\"buffering_visitor\", vector<visit>::allocator_type(memory)) {}\n+      : visits_(memory) {}\n \n   template <QLJS_PARSE_VISITOR Visitor>\n   void move_into(Visitor &target) {\n@@ -253,7 +253,8 @@ class buffering_visitor {\n     };\n   };\n \n-  vector<visit> visits_;\n+  std::deque<visit, boost::container::pmr::polymorphic_allocator<visit>>\n+      visits_;\n };\n QLJS_STATIC_ASSERT_IS_PARSE_VISITOR(buffering_visitor);\n }"
            }
        ],
        "lines_added": 5,
        "lines_removed": 4
    },
    "issues": [],
    "pull_requests": [],
    "build_info": {
        "old_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON -DBUILD_TESTING=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBENCHMARK_ENABLE_TESTING=ON",
            "cmake --build /test_workspace/workspace/old/build -- -j 1"
        ],
        "new_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON -DBUILD_TESTING=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBENCHMARK_ENABLE_TESTING=ON",
            "cmake --build /test_workspace/workspace/new/build -- -j 1"
        ],
        "old_test_script": [
            "cd /test_workspace/workspace/old/build",
            "ctest --output-on-failure"
        ],
        "new_test_script": [
            "cd /test_workspace/workspace/new/build",
            "ctest --output-on-failure"
        ],
        "build_system": "cmake"
    },
    "performance_analysis": {
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 1.0,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999992329095441,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.998803196846993,
        "relative_improvement": -0.010153946937438542,
        "absolute_improvement_ms": -10.333333333333528,
        "old_mean_ms": 1017.6666666666665,
        "new_mean_ms": 1028.0,
        "old_std_ms": 11.043279539543766,
        "new_std_ms": 12.972118642263716,
        "effect_size_cohens_d": -0.8577967017412564,
        "old_ci95_ms": [
            1013.5430383166657,
            1021.7902950166673
        ],
        "new_ci95_ms": [
            1023.1561312922246,
            1032.8438687077755
        ],
        "old_ci99_ms": [
            1012.1091924242802,
            1023.2241409090528
        ],
        "new_ci99_ms": [
            1021.4718472926985,
            1034.5281527073016
        ],
        "new_times_s": [
            1.05,
            1.02,
            1.03,
            1.01,
            1.01,
            1.04,
            1.02,
            1.03,
            1.02,
            1.05,
            1.01,
            1.03,
            1.01,
            1.01,
            1.04,
            1.05,
            1.04,
            1.02,
            1.02,
            1.03,
            1.02,
            1.03,
            1.02,
            1.03,
            1.02,
            1.04,
            1.03,
            1.03,
            1.03,
            1.06,
            1.04
        ],
        "old_times_s": [
            1.06,
            1.03,
            1.01,
            1.02,
            1.02,
            1.03,
            1.01,
            1.02,
            1.02,
            1.02,
            1.02,
            1.01,
            1.02,
            1.02,
            1.02,
            1.04,
            1.04,
            1.02,
            1.01,
            1.01,
            1.02,
            1.0,
            1.02,
            1.01,
            1.0,
            1.04,
            1.01,
            1.02,
            1.0,
            1.0,
            1.02
        ]
    },
    "tests": {
        "total_tests": 2,
        "significant_improvements": 0,
        "significant_improvements_tests": [],
        "significant_regressions": 0,
        "significant_regressions_tests": [],
        "significant_pair_improvements": 0,
        "significant_pair_improvements_tests": [],
        "significant_pair_regressions": 0,
        "significant_pair_regressions_tests": [],
        "significant_binom_improvements": 0,
        "significant_binom_improvements_tests": [],
        "significant_binom_regressions": 0,
        "significant_binom_regressions_tests": [],
        "significant_wilcoxon_improvements": 0,
        "significant_wilcoxon_improvements_tests": [],
        "significant_wilcoxon_regressions": 0,
        "significant_wilcoxon_regressions_tests": [],
        "significant_mannwhitney_improvements": 0,
        "significant_mannwhitney_improvements_tests": [],
        "significant_mannwhitney_regressions": 1,
        "significant_mannwhitney_regressions_tests": [
            "quick-lint-js-test"
        ],
        "tests": [
            {
                "test_name": "quick-lint-js-test",
                "is_significant": false,
                "p_value": 1.0,
                "is_pair_significant": false,
                "pair_p_value": 1.0,
                "is_binom_significant": false,
                "binom_p_value": 1.0,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.9999995582587199,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 0.9989186751893113,
                "relative_improvement": -0.009771986970684023,
                "absolute_improvement_ms": -3.103448275862064,
                "old_mean_ms": 317.58620689655174,
                "new_mean_ms": 320.68965517241384,
                "old_std_ms": 4.354941703556932,
                "new_std_ms": 2.57880714777564,
                "effect_size_cohens_d": -0.867173217944616,
                "old_ci95_ms": [
                    315.9296756654464,
                    319.2427381276571
                ],
                "new_ci95_ms": [
                    319.70872939428017,
                    321.67058095054745
                ],
                "old_ci99_ms": [
                    315.35157762592706,
                    319.8208361671764
                ],
                "new_ci99_ms": [
                    319.366404867821,
                    322.0129054770066
                ],
                "new_times": [
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.33,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.33,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32
                ],
                "old_times": [
                    0.32,
                    0.32,
                    0.32,
                    0.31,
                    0.31,
                    0.32,
                    0.32,
                    0.31,
                    0.32,
                    0.32,
                    0.32,
                    0.31,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.31,
                    0.32,
                    0.31,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.32,
                    0.31,
                    0.32,
                    0.32
                ]
            },
            {
                "test_name": "quick-lint-js-test-cli",
                "is_significant": false,
                "p_value": 0.9999997933516424,
                "is_pair_significant": false,
                "pair_p_value": 0.9999938094319131,
                "is_binom_significant": false,
                "binom_p_value": 0.9999991878867149,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.9994853140703425,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 0.5058797177023625,
                "relative_improvement": 0.0,
                "absolute_improvement_ms": 0.0,
                "old_mean_ms": 91.03448275862068,
                "new_mean_ms": 91.03448275862068,
                "old_std_ms": 3.099340466946037,
                "new_std_ms": 3.0993404669460367,
                "effect_size_cohens_d": 0.0,
                "old_ci95_ms": [
                    89.85555669512561,
                    92.21340882211575
                ],
                "new_ci95_ms": [
                    89.85555669512561,
                    92.21340882211575
                ],
                "old_ci99_ms": [
                    89.4441338174598,
                    92.62483169978155
                ],
                "new_ci99_ms": [
                    89.4441338174598,
                    92.62483169978155
                ],
                "new_times": [
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.1,
                    0.09,
                    0.09,
                    0.1,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.1,
                    0.09
                ],
                "old_times": [
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.1,
                    0.1,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.09,
                    0.1,
                    0.09,
                    0.09
                ]
            }
        ]
    },
    "logs": {
        "full_log_path": "/logs/full.log",
        "config_log_path": "/logs/config.log",
        "build_log_path": "/logs/build.log",
        "test_log_path": "/logs/test.log",
        "build_success": true,
        "test_success": true
    },
    "raw_timing_data": {
        "warmup_runs": 1,
        "measurement_runs": 30,
        "min_exec_time_improvement": 0.05,
        "min_p_value": 0.05
    }
}