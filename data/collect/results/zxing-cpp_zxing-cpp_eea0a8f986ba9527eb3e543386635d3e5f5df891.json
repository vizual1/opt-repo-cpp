{
    "metadata": {
        "collection_date": "2026-01-14T18:39:59.281926",
        "repository": "https://github.com/zxing-cpp/zxing-cpp",
        "repository_name": "zxing-cpp/zxing-cpp"
    },
    "commit_info": {
        "old_sha": "f25c1807558299789a0b3fa20101960cdd13e20c",
        "new_sha": "eea0a8f986ba9527eb3e543386635d3e5f5df891",
        "commit_message": [
            "Aztec: minor performance improvements\n\nMoving the break condition in `IsAztectCenterPattern` outside the loop\nmakes the function run about twice as fast. That is counter intuitive and\nlikely caused by enabled vectorizations or simply by reducing the number\nof conditional jumps that can throw off the branch predictor.\n\nTuned the range limit."
        ],
        "commit_date": "2023-01-30T19:00:52+00:00",
        "patch": [
            "--- core/src/aztec/AZDetector.cpp\n@@ -37,10 +37,8 @@ static bool IsAztectCenterPattern(const PatternView& view)\n \t\t\tm = v;\n \t\telse if (v > M)\n \t\t\tM = v;\n-\t\tif (M > m * 4 / 3)\n-\t\t\treturn false;\n \t}\n-\treturn view[-1] >= view[Size(view) / 2] - 2 && view[Size(view)] >= view[Size(view) / 2] - 2;\n+\treturn M <= m * 4 / 3 && view[-1] >= view[Size(view) / 2] - 2 && view[Size(view)] >= view[Size(view) / 2] - 2;\n };\n \n // specialized version of FindLeftGuard to find the '1,1,1,1,1,1,1' pattern of a compact Aztec center pattern\n@@ -57,20 +55,20 @@ static PatternView FindAztecCenterPattern(const PatternView& view)\n \n static int CheckDirection(BitMatrixCursorF& cur, PointF dir, int range, bool updatePosition)\n {\n-\trange = range * 2 / 7; // TODO: tune\n+\trange *= 2; // tilted symbols may have a larger vertical than horizontal range\n \tauto pOri = cur.p;\n \tauto cuo = cur;\n \tcur.setDirection(dir);\n \tcuo.setDirection(-dir);\n \n-\tint centerUp = cur.stepToEdge(1, range);\n+\tint centerUp = cur.stepToEdge(1, range / 7);\n \tif (!centerUp)\n \t\treturn 0;\n-\tint centerDown = cuo.stepToEdge(1, range);\n+\tint centerDown = cuo.stepToEdge(1, range / 7);\n \tif (!centerDown)\n \t\treturn 0;\n \tint center = centerUp + centerDown - 1; // -1 because the starting pixel is counted twice\n-\tif (center > range || center < range / 6)\n+\tif (center > range / 7 || center < range / (4 * 7))\n \t\treturn 0;\n \n \tif (updatePosition)\n@@ -82,7 +80,9 @@ static int CheckDirection(BitMatrixCursorF& cur, PointF dir, int range, bool upd\n \tfor (auto c : {&cur, &cuo}) {\n \t\tint lastS = center;\n \t\tfor (int i = 0; i < 3; ++i) {\n-\t\t\tint s = c->stepToEdge(1, M);\n+\t\t\tint s = c->stepToEdge(1, range - spread);\n+\t\t\tif (s == 0)\n+\t\t\t\treturn 0;\n \t\t\tint v = s + lastS;\n \t\t\tif (m == 0)\n \t\t\t\tm = M = v;"
        ],
        "files_changed": [
            {
                "filename": "core/src/aztec/AZDetector.cpp",
                "status": "modified",
                "additions": 8,
                "deletions": 8,
                "changes": 16,
                "patch": "@@ -37,10 +37,8 @@ static bool IsAztectCenterPattern(const PatternView& view)\n \t\t\tm = v;\n \t\telse if (v > M)\n \t\t\tM = v;\n-\t\tif (M > m * 4 / 3)\n-\t\t\treturn false;\n \t}\n-\treturn view[-1] >= view[Size(view) / 2] - 2 && view[Size(view)] >= view[Size(view) / 2] - 2;\n+\treturn M <= m * 4 / 3 && view[-1] >= view[Size(view) / 2] - 2 && view[Size(view)] >= view[Size(view) / 2] - 2;\n };\n \n // specialized version of FindLeftGuard to find the '1,1,1,1,1,1,1' pattern of a compact Aztec center pattern\n@@ -57,20 +55,20 @@ static PatternView FindAztecCenterPattern(const PatternView& view)\n \n static int CheckDirection(BitMatrixCursorF& cur, PointF dir, int range, bool updatePosition)\n {\n-\trange = range * 2 / 7; // TODO: tune\n+\trange *= 2; // tilted symbols may have a larger vertical than horizontal range\n \tauto pOri = cur.p;\n \tauto cuo = cur;\n \tcur.setDirection(dir);\n \tcuo.setDirection(-dir);\n \n-\tint centerUp = cur.stepToEdge(1, range);\n+\tint centerUp = cur.stepToEdge(1, range / 7);\n \tif (!centerUp)\n \t\treturn 0;\n-\tint centerDown = cuo.stepToEdge(1, range);\n+\tint centerDown = cuo.stepToEdge(1, range / 7);\n \tif (!centerDown)\n \t\treturn 0;\n \tint center = centerUp + centerDown - 1; // -1 because the starting pixel is counted twice\n-\tif (center > range || center < range / 6)\n+\tif (center > range / 7 || center < range / (4 * 7))\n \t\treturn 0;\n \n \tif (updatePosition)\n@@ -82,7 +80,9 @@ static int CheckDirection(BitMatrixCursorF& cur, PointF dir, int range, bool upd\n \tfor (auto c : {&cur, &cuo}) {\n \t\tint lastS = center;\n \t\tfor (int i = 0; i < 3; ++i) {\n-\t\t\tint s = c->stepToEdge(1, M);\n+\t\t\tint s = c->stepToEdge(1, range - spread);\n+\t\t\tif (s == 0)\n+\t\t\t\treturn 0;\n \t\t\tint v = s + lastS;\n \t\t\tif (m == 0)\n \t\t\t\tm = M = v;"
            }
        ],
        "lines_added": 8,
        "lines_removed": 8
    },
    "issues": [],
    "pull_requests": [],
    "build_info": {
        "old_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_UNIT_TESTS=ON",
            "cmake --build /test_workspace/workspace/old/build -- -j 1"
        ],
        "new_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_UNIT_TESTS=ON",
            "cmake --build /test_workspace/workspace/new/build -- -j 1"
        ],
        "old_test_script": [
            "cd /test_workspace/workspace/old/build",
            "ctest --output-on-failure"
        ],
        "new_test_script": [
            "cd /test_workspace/workspace/new/build",
            "ctest --output-on-failure"
        ],
        "build_system": "cmake"
    },
    "performance_analysis": {
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 0.999999999999997,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999990686774,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999990437270321,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.9434587674157469,
        "relative_improvement": -0.004491129092123745,
        "absolute_improvement_ms": -40.33333333333111,
        "old_mean_ms": 8980.666666666668,
        "new_mean_ms": 9020.999999999998,
        "old_std_ms": 107.41262153195885,
        "new_std_ms": 144.56474507030197,
        "effect_size_cohens_d": -0.3167105594871522,
        "old_ci95_ms": [
            8940.558134621358,
            9020.775198711977
        ],
        "new_ci95_ms": [
            8967.018637031877,
            9074.981362968121
        ],
        "old_ci99_ms": [
            8926.61181137359,
            9034.721521959746
        ],
        "new_ci99_ms": [
            8948.248527558457,
            9093.751472441541
        ],
        "new_times_s": [
            9.09,
            9.35,
            9.01,
            8.98,
            9.09,
            9.14,
            9.08,
            9.02,
            8.92,
            9.13,
            9.05,
            8.98,
            8.87,
            9.08,
            9.13,
            9.12,
            9.19,
            8.85,
            8.99,
            9.03,
            9.08,
            8.51,
            9.08,
            9.05,
            9.01,
            9.03,
            9.06,
            9.06,
            8.99,
            8.99,
            8.76
        ],
        "old_times_s": [
            8.94,
            9.17,
            8.99,
            9.12,
            8.93,
            8.81,
            8.79,
            8.99,
            9.0,
            9.01,
            8.89,
            9.02,
            9.06,
            9.14,
            8.89,
            9.01,
            9.03,
            8.78,
            9.05,
            9.03,
            9.06,
            9.08,
            9.03,
            8.9,
            8.82,
            8.96,
            9.03,
            8.91,
            8.79,
            9.06,
            9.07
        ]
    },
    "tests": {
        "total_tests": 2,
        "significant_improvements": 0,
        "significant_improvements_tests": [],
        "significant_regressions": 0,
        "significant_regressions_tests": [],
        "significant_pair_improvements": 0,
        "significant_pair_improvements_tests": [],
        "significant_pair_regressions": 0,
        "significant_pair_regressions_tests": [],
        "significant_binom_improvements": 0,
        "significant_binom_improvements_tests": [],
        "significant_binom_regressions": 0,
        "significant_binom_regressions_tests": [],
        "significant_wilcoxon_improvements": 0,
        "significant_wilcoxon_improvements_tests": [],
        "significant_wilcoxon_regressions": 0,
        "significant_wilcoxon_regressions_tests": [],
        "significant_mannwhitney_improvements": 0,
        "significant_mannwhitney_improvements_tests": [],
        "significant_mannwhitney_regressions": 1,
        "significant_mannwhitney_regressions_tests": [
            "UnitTest"
        ],
        "tests": [
            {
                "test_name": "ZXingWriterTest",
                "is_significant": false,
                "p_value": 1.0,
                "is_pair_significant": false,
                "pair_p_value": 1.0,
                "is_binom_significant": false,
                "binom_p_value": 1.0,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.9999999638108507,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 1.0,
                "relative_improvement": 0.0,
                "absolute_improvement_ms": 0.0,
                "old_mean_ms": 10.000000000000002,
                "new_mean_ms": 10.000000000000002,
                "old_std_ms": 1.7654289301252243e-15,
                "new_std_ms": 1.7654289301252243e-15,
                "effect_size_cohens_d": 0.0,
                "old_ci95_ms": [
                    10.000000000000002,
                    10.000000000000002
                ],
                "new_ci95_ms": [
                    10.000000000000002,
                    10.000000000000002
                ],
                "old_ci99_ms": [
                    10.0,
                    10.000000000000004
                ],
                "new_ci99_ms": [
                    10.0,
                    10.000000000000004
                ],
                "new_times": [
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01
                ],
                "old_times": [
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01,
                    0.01
                ]
            },
            {
                "test_name": "UnitTest",
                "is_significant": false,
                "p_value": 1.0,
                "is_pair_significant": false,
                "pair_p_value": 0.9999999999999862,
                "is_binom_significant": false,
                "binom_p_value": 0.9999999981373549,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.9999985774488067,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 0.9580395075660351,
                "relative_improvement": -0.004117443337053116,
                "absolute_improvement_ms": -36.89655172413886,
                "old_mean_ms": 8961.03448275862,
                "new_mean_ms": 8997.931034482759,
                "old_std_ms": 103.31452766003322,
                "new_std_ms": 132.59442216087874,
                "effect_size_cohens_d": -0.3104215025774782,
                "old_ci95_ms": [
                    8921.735738172449,
                    9000.333227344792
                ],
                "new_ci95_ms": [
                    8947.494813671705,
                    9048.367255293813
                ],
                "old_ci99_ms": [
                    8908.021220284565,
                    9014.047745232676
                ],
                "new_ci99_ms": [
                    8929.89352742721,
                    9065.968541538308
                ],
                "new_times": [
                    9.0,
                    8.97,
                    9.08,
                    9.13,
                    9.07,
                    9.01,
                    8.91,
                    9.12,
                    9.03,
                    8.97,
                    8.85,
                    9.07,
                    9.11,
                    9.1,
                    9.18,
                    8.84,
                    8.97,
                    9.02,
                    9.07,
                    8.5,
                    9.07,
                    9.04,
                    9.0,
                    9.02,
                    9.05,
                    9.05,
                    8.98,
                    8.98,
                    8.75
                ],
                "old_times": [
                    8.98,
                    9.11,
                    8.92,
                    8.79,
                    8.78,
                    8.98,
                    8.99,
                    8.99,
                    8.88,
                    9.0,
                    9.03,
                    9.13,
                    8.88,
                    9.0,
                    9.01,
                    8.77,
                    9.04,
                    9.02,
                    9.05,
                    9.07,
                    9.02,
                    8.88,
                    8.81,
                    8.95,
                    9.02,
                    8.9,
                    8.77,
                    9.04,
                    9.06
                ]
            }
        ]
    },
    "logs": {
        "full_log_path": "/logs/full.log",
        "config_log_path": "/logs/config.log",
        "build_log_path": "/logs/build.log",
        "test_log_path": "/logs/test.log",
        "build_success": true,
        "test_success": true
    },
    "raw_timing_data": {
        "warmup_runs": 1,
        "measurement_runs": 30,
        "min_exec_time_improvement": 0.05,
        "min_p_value": 0.05
    }
}