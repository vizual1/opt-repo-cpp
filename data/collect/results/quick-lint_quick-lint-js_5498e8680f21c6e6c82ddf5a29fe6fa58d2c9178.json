{
  "metadata": {
    "collection_date": "2026-01-11T17:53:03.049951",
    "repository": "https://github.com/quick-lint/quick-lint-js",
    "repository_name": "quick-lint/quick-lint-js"
  },
  "commit_info": {
    "old_sha": "2d9724a0ca83ceee5627ae86103c7f34cde1dec0",
    "new_sha": "5498e8680f21c6e6c82ddf5a29fe6fa58d2c9178",
    "commit_message": [
      "Optimize buffering_error_reporter memory usage more\n\nbuffering_error_reporter's memory is allocated from a\nmonotonic_buffer_resource, even though buffering_error_reporter-s are\nshort-lived. This wastes memory.\n\nAllocate buffering_error_reporter memory with a pool allocator instead.\nFor a 630 KiB test found through fuzzing, this patch reduces peak RSS\nfrom 398.1 MiB to 63.9 MiB."
    ],
    "commit_date": "2021-10-21T05:24:20+00:00",
    "patch": [
      "--- src/lex.cpp\n@@ -965,7 +965,7 @@ lexer_transaction lexer::begin_transaction() {\n       /*old_input=*/this->input_,\n       /*error_reporter_pointer=*/\n       &this->error_reporter_,\n-      /*memory=*/this->allocator_.memory_resource());\n+      /*memory=*/&this->temporary_allocator_);\n }\n \n void lexer::commit_transaction(lexer_transaction&& transaction) {\n--- src/quick-lint-js/allocator.h\n@@ -27,7 +27,7 @@ template <class T>\n void delete_object(boost::container::pmr::polymorphic_allocator<T>& allocator,\n                    T* object) {\n   allocator.destroy(object);\n-  allocator.deallocate(object, sizeof(T));\n+  allocator.deallocate(object, 1);\n }\n \n template <class T>\n--- src/quick-lint-js/lex.h\n@@ -5,6 +5,7 @@\n #define QUICK_LINT_JS_LEX_H\n \n #include <boost/container/pmr/memory_resource.hpp>\n+#include <boost/container/pmr/unsynchronized_pool_resource.hpp>\n #include <cstddef>\n #include <cstdint>\n #include <quick-lint-js/buffering-error-reporter.h>\n@@ -235,6 +236,7 @@ class lexer {\n   padded_string_view original_input_;\n \n   monotonic_allocator allocator_;\n+  boost::container::pmr::unsynchronized_pool_resource temporary_allocator_;\n };\n \n struct lexer_transaction {"
    ],
    "files_changed": [
      {
        "filename": "src/lex.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "patch": "@@ -965,7 +965,7 @@ lexer_transaction lexer::begin_transaction() {\n       /*old_input=*/this->input_,\n       /*error_reporter_pointer=*/\n       &this->error_reporter_,\n-      /*memory=*/this->allocator_.memory_resource());\n+      /*memory=*/&this->temporary_allocator_);\n }\n \n void lexer::commit_transaction(lexer_transaction&& transaction) {"
      },
      {
        "filename": "src/quick-lint-js/allocator.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "patch": "@@ -27,7 +27,7 @@ template <class T>\n void delete_object(boost::container::pmr::polymorphic_allocator<T>& allocator,\n                    T* object) {\n   allocator.destroy(object);\n-  allocator.deallocate(object, sizeof(T));\n+  allocator.deallocate(object, 1);\n }\n \n template <class T>"
      },
      {
        "filename": "src/quick-lint-js/lex.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "patch": "@@ -5,6 +5,7 @@\n #define QUICK_LINT_JS_LEX_H\n \n #include <boost/container/pmr/memory_resource.hpp>\n+#include <boost/container/pmr/unsynchronized_pool_resource.hpp>\n #include <cstddef>\n #include <cstdint>\n #include <quick-lint-js/buffering-error-reporter.h>\n@@ -235,6 +236,7 @@ class lexer {\n   padded_string_view original_input_;\n \n   monotonic_allocator allocator_;\n+  boost::container::pmr::unsynchronized_pool_resource temporary_allocator_;\n };\n \n struct lexer_transaction {"
      }
    ],
    "lines_added": 4,
    "lines_removed": 2
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBUILD_TESTING=ON -DBENCHMARK_ENABLE_TESTING=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON",
    "new_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBUILD_TESTING=ON -DBENCHMARK_ENABLE_TESTING=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON",
    "old_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/old/build -- -j 1",
    "new_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/old/build -- -j 1",
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 1.0,
    "is_pair_significant": false,
    "pair_p_value": 1.0,
    "is_binom_significant": false,
    "binom_p_value": 1.0,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999992803858463,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.7801618330159695,
    "relative_improvement": -0.0005496015388841996,
    "absolute_improvement_ms": -0.6666666666663712,
    "old_mean_ms": 1213.0,
    "new_mean_ms": 1213.6666666666665,
    "old_std_ms": 10.221680811915908,
    "new_std_ms": 8.087168778415275,
    "effect_size_cohens_d": -0.0723346106324589,
    "old_ci95_ms": [
      1209.1831616568481,
      1216.8168383431519
    ],
    "new_ci95_ms": [
      1210.6468682158077,
      1216.6864651175254
    ],
    "old_ci99_ms": [
      1207.8559911371703,
      1218.1440088628297
    ],
    "new_ci99_ms": [
      1209.5968401247467,
      1217.7364932085861
    ],
    "new_times_s": [
      1.21,
      1.21,
      1.21,
      1.21,
      1.2,
      1.21,
      1.22,
      1.2,
      1.21,
      1.21,
      1.21,
      1.2,
      1.21,
      1.22,
      1.21,
      1.22,
      1.22,
      1.23,
      1.22,
      1.21,
      1.21,
      1.2,
      1.22,
      1.21,
      1.22,
      1.21,
      1.23,
      1.22,
      1.22,
      1.22,
      1.22
    ],
    "old_times_s": [
      1.22,
      1.2,
      1.2,
      1.21,
      1.21,
      1.21,
      1.22,
      1.21,
      1.21,
      1.2,
      1.21,
      1.21,
      1.22,
      1.21,
      1.22,
      1.24,
      1.21,
      1.22,
      1.2,
      1.24,
      1.21,
      1.21,
      1.2,
      1.22,
      1.21,
      1.21,
      1.21,
      1.21,
      1.23,
      1.21,
      1.22
    ]
  },
  "tests": {
    "total_tests": 2,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "quick-lint-js-test",
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 0.9999999999999917,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999990788996334,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.3295490203846026,
        "relative_improvement": 0.0027739251040222557,
        "absolute_improvement_ms": 1.3793103448276334,
        "old_mean_ms": 497.2413793103448,
        "new_mean_ms": 495.8620689655172,
        "old_std_ms": 7.510255713802268,
        "new_std_ms": 5.012300141587657,
        "effect_size_cohens_d": 0.21603594211195362,
        "old_ci95_ms": [
          494.38463081854763,
          500.09812780214213
        ],
        "new_ci95_ms": [
          493.95549195728023,
          497.7686459737542
        ],
        "old_ci99_ms": [
          493.38767967660897,
          501.0950789440808
        ],
        "new_ci99_ms": [
          493.2901326752106,
          498.4340052558238
        ],
        "new_times": [
          0.5,
          0.49,
          0.49,
          0.5,
          0.5,
          0.49,
          0.49,
          0.49,
          0.49,
          0.49,
          0.5,
          0.49,
          0.49,
          0.5,
          0.5,
          0.5,
          0.5,
          0.5,
          0.49,
          0.49,
          0.5,
          0.5,
          0.49,
          0.5,
          0.5,
          0.5,
          0.5,
          0.5,
          0.5
        ],
        "old_times": [
          0.49,
          0.5,
          0.5,
          0.5,
          0.5,
          0.5,
          0.5,
          0.49,
          0.49,
          0.49,
          0.5,
          0.5,
          0.49,
          0.49,
          0.49,
          0.5,
          0.49,
          0.52,
          0.49,
          0.51,
          0.49,
          0.5,
          0.5,
          0.49,
          0.49,
          0.5,
          0.51,
          0.5,
          0.5
        ]
      },
      {
        "test_name": "quick-lint-js-test-cli",
        "is_significant": false,
        "p_value": 0.9999994036566868,
        "is_pair_significant": false,
        "pair_p_value": 0.9999947798325634,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999981373549,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999970919411219,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.5,
        "relative_improvement": 0.003802281368821212,
        "absolute_improvement_ms": 0.34482758620690834,
        "old_mean_ms": 90.68965517241377,
        "new_mean_ms": 90.34482758620686,
        "old_std_ms": 3.713906763541038,
        "new_std_ms": 1.8569533817705206,
        "effect_size_cohens_d": 0.11744404390294468,
        "old_ci95_ms": [
          89.27696059186532,
          92.10234975296223
        ],
        "new_ci95_ms": [
          89.63848029593265,
          91.05117487648108
        ],
        "old_ci99_ms": [
          88.7839569272682,
          92.59535341755934
        ],
        "new_ci99_ms": [
          89.39197846363409,
          91.29767670877965
        ],
        "new_times": [
          0.09,
          0.09,
          0.09,
          0.1,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09
        ],
        "old_times": [
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.09,
          0.11,
          0.09,
          0.09
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}