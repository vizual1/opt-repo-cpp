{
  "metadata": {
    "collection_date": "2026-01-14T18:41:08.229622",
    "repository": "https://github.com/google/highway",
    "repository_name": "google/highway"
  },
  "commit_info": {
    "old_sha": "2dfbb409dc43524afaf10d3b1ec30b1b00d02d14",
    "new_sha": "92c0c2e8b015a9aae0d54e0779881c410d601c1f",
    "commit_message": [
      "Improve generic implementations of GatherIndexN and ScatterIndexN\n\nWhilst benchmarking https://github.com/numpy/numpy/pull/25781 I realised these were not translated well by the compiler. These implementations make the compiler work less by explicitly using `ExtractLane` and `InsertLane`.\n\nWith these, the NumPy benchmarks show `sin`/`cos` not regressing on AArch64 after migrating to Highway :smile_cat:"
    ],
    "commit_date": "2024-04-12T15:50:54+00:00",
    "patch": [
      "--- hwy/ops/generic_ops-inl.h\n@@ -1,5 +1,5 @@\n // Copyright 2021 Google LLC\n-// Copyright 2023 Arm Limited and/or its affiliates <open-source-office@arm.com>\n+// Copyright 2023,2024 Arm Limited and/or its affiliates <open-source-office@arm.com> \n // SPDX-License-Identifier: Apache-2.0\n // SPDX-License-Identifier: BSD-3-Clause\n //\n@@ -2782,14 +2782,29 @@ template <class D, typename T = TFromD<D>>\n HWY_API void ScatterIndexN(VFromD<D> v, D d, T* HWY_RESTRICT base,\n                            VFromD<RebindToSigned<D>> index,\n                            const size_t max_lanes_to_store) {\n-  MaskedScatterIndex(v, FirstN(d, max_lanes_to_store), d, base, index);\n+  const RebindToSigned<decltype(d)> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_store) base[ExtractLane(index, i)] = ExtractLane(v, i);\n+  }\n }\n \n template <class D, typename T = TFromD<D>>\n HWY_API VFromD<D> GatherIndexN(D d, const T* HWY_RESTRICT base,\n                                VFromD<RebindToSigned<D>> index,\n                                const size_t max_lanes_to_load) {\n-  return MaskedGatherIndex(FirstN(d, max_lanes_to_load), d, base, index);\n+  const RebindToSigned<D> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  VFromD<D> v = Zero(d);\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_load)\n+      v = InsertLane(v, i, base[ExtractLane(index, i)]);\n+  }\n+  return v;\n }\n \n // ------------------------------ Integer AbsDiff and SumsOf8AbsDiff"
    ],
    "files_changed": [
      {
        "filename": "hwy/ops/generic_ops-inl.h",
        "status": "modified",
        "additions": 18,
        "deletions": 3,
        "changes": 21,
        "patch": "@@ -1,5 +1,5 @@\n // Copyright 2021 Google LLC\n-// Copyright 2023 Arm Limited and/or its affiliates <open-source-office@arm.com>\n+// Copyright 2023,2024 Arm Limited and/or its affiliates <open-source-office@arm.com> \n // SPDX-License-Identifier: Apache-2.0\n // SPDX-License-Identifier: BSD-3-Clause\n //\n@@ -2782,14 +2782,29 @@ template <class D, typename T = TFromD<D>>\n HWY_API void ScatterIndexN(VFromD<D> v, D d, T* HWY_RESTRICT base,\n                            VFromD<RebindToSigned<D>> index,\n                            const size_t max_lanes_to_store) {\n-  MaskedScatterIndex(v, FirstN(d, max_lanes_to_store), d, base, index);\n+  const RebindToSigned<decltype(d)> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_store) base[ExtractLane(index, i)] = ExtractLane(v, i);\n+  }\n }\n \n template <class D, typename T = TFromD<D>>\n HWY_API VFromD<D> GatherIndexN(D d, const T* HWY_RESTRICT base,\n                                VFromD<RebindToSigned<D>> index,\n                                const size_t max_lanes_to_load) {\n-  return MaskedGatherIndex(FirstN(d, max_lanes_to_load), d, base, index);\n+  const RebindToSigned<D> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  VFromD<D> v = Zero(d);\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_load)\n+      v = InsertLane(v, i, base[ExtractLane(index, i)]);\n+  }\n+  return v;\n }\n \n // ------------------------------ Integer AbsDiff and SumsOf8AbsDiff"
      }
    ],
    "lines_added": 18,
    "lines_removed": 3
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
    "new_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
    "old_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/old/build -- -j 1",
    "new_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/new/build -- -j 1",
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 1.0,
    "is_pair_significant": false,
    "pair_p_value": 1.0,
    "is_binom_significant": false,
    "binom_p_value": 1.0,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999991333466779,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.08117000305037786,
    "relative_improvement": 0.0026737639220122296,
    "absolute_improvement_ms": 145.00000000001023,
    "old_mean_ms": 54230.66666666667,
    "new_mean_ms": 54085.666666666664,
    "old_std_ms": 475.46661896196895,
    "new_std_ms": 461.23285564499446,
    "effect_size_cohens_d": 0.30956195877343123,
    "old_ci95_ms": [
      54053.12451332265,
      54408.208820010695
    ],
    "new_ci95_ms": [
      53913.43948789436,
      54257.893845438964
    ],
    "old_ci99_ms": [
      53991.390509748446,
      54469.9428235849
    ],
    "new_ci99_ms": [
      53853.55357871931,
      54317.779754614014
    ],
    "new_times_s": [
      53.22,
      54.31,
      54.26,
      53.89,
      54.13,
      53.14,
      53.88,
      53.98,
      53.27,
      53.53,
      53.8,
      54.02,
      54.5,
      54.09,
      54.0,
      54.51,
      53.95,
      53.42,
      54.04,
      54.67,
      54.17,
      53.76,
      54.3,
      54.2,
      54.28,
      55.19,
      54.41,
      54.73,
      53.51,
      53.82,
      54.81
    ],
    "old_times_s": [
      55.28,
      54.2,
      54.14,
      53.81,
      54.32,
      54.39,
      53.58,
      53.32,
      54.07,
      53.39,
      54.34,
      54.62,
      54.42,
      54.03,
      54.66,
      55.15,
      54.21,
      53.54,
      54.24,
      54.23,
      53.49,
      55.2,
      54.32,
      53.95,
      54.67,
      54.38,
      54.72,
      54.42,
      54.87,
      53.89,
      54.35
    ]
  },
  "tests": {
    "total_tests": 4,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "AbortDeathTest.AbortDefault",
        "is_significant": false,
        "p_value": 0.9281649714645384,
        "is_pair_significant": false,
        "pair_p_value": 0.9176090537335577,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999981373549,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999969686045256,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.7284132888489818,
        "relative_improvement": -0.03333333333333337,
        "absolute_improvement_ms": -0.3448275862068962,
        "old_mean_ms": 10.344827586206899,
        "new_mean_ms": 10.689655172413794,
        "old_std_ms": 1.8569533817705184,
        "new_std_ms": 2.578807147775638,
        "effect_size_cohens_d": -0.1534574892576163,
        "old_ci95_ms": [
          9.638480295932675,
          11.05117487648112
        ],
        "new_ci95_ms": [
          9.708729394280168,
          11.670580950547421
        ],
        "old_ci99_ms": [
          9.391978463634118,
          11.29767670877968
        ],
        "new_ci99_ms": [
          9.366404867821013,
          12.012905477006576
        ],
        "new_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01
        ],
        "old_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ]
      },
      {
        "test_name": "NanobenchmarkTest.RunTest",
        "is_significant": false,
        "p_value": 0.9968744435296013,
        "is_pair_significant": false,
        "pair_p_value": 0.9987813862251773,
        "is_binom_significant": false,
        "binom_p_value": 0.995934970676899,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9988108688574097,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.925264440140283,
        "relative_improvement": -0.051737451737451735,
        "absolute_improvement_ms": -23.103448275862192,
        "old_mean_ms": 446.55172413793093,
        "new_mean_ms": 469.65517241379314,
        "old_std_ms": 57.83448440339809,
        "new_std_ms": 66.14285182308546,
        "effect_size_cohens_d": -0.371870276148734,
        "old_ci95_ms": [
          424.5526628024238,
          468.55078547343805
        ],
        "new_ci95_ms": [
          444.4957771296204,
          494.81456769796586
        ],
        "old_ci99_ms": [
          416.8754068651275,
          476.2280414107343
        ],
        "new_ci99_ms": [
          435.7156244731777,
          503.59472035440854
        ],
        "new_times": [
          0.55,
          0.37,
          0.53,
          0.42,
          0.48,
          0.54,
          0.39,
          0.42,
          0.49,
          0.42,
          0.56,
          0.49,
          0.48,
          0.59,
          0.51,
          0.33,
          0.45,
          0.45,
          0.53,
          0.49,
          0.47,
          0.58,
          0.37,
          0.48,
          0.47,
          0.51,
          0.45,
          0.39,
          0.41
        ],
        "old_times": [
          0.5,
          0.46,
          0.6,
          0.49,
          0.39,
          0.43,
          0.42,
          0.47,
          0.49,
          0.43,
          0.47,
          0.53,
          0.44,
          0.51,
          0.5,
          0.51,
          0.35,
          0.41,
          0.47,
          0.47,
          0.38,
          0.41,
          0.42,
          0.42,
          0.44,
          0.44,
          0.4,
          0.35,
          0.35
        ]
      },
      {
        "test_name": "ThreadPoolTest.TestPool",
        "is_significant": false,
        "p_value": 0.9281649714645384,
        "is_pair_significant": false,
        "pair_p_value": 0.9176090537335576,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999981373549,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999969686045256,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.7284132888489818,
        "relative_improvement": -0.03333333333333337,
        "absolute_improvement_ms": -0.3448275862068962,
        "old_mean_ms": 10.344827586206899,
        "new_mean_ms": 10.689655172413794,
        "old_std_ms": 1.8569533817705186,
        "new_std_ms": 2.578807147775638,
        "effect_size_cohens_d": -0.1534574892576163,
        "old_ci95_ms": [
          9.638480295932675,
          11.05117487648112
        ],
        "new_ci95_ms": [
          9.708729394280168,
          11.670580950547421
        ],
        "old_ci99_ms": [
          9.391978463634116,
          11.29767670877968
        ],
        "new_ci99_ms": [
          9.366404867821013,
          12.012905477006576
        ],
        "new_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ],
        "old_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02
        ]
      },
      {
        "test_name": "ThreadPoolTest.TestCounter",
        "is_significant": false,
        "p_value": 0.5861960283993156,
        "is_pair_significant": false,
        "pair_p_value": 0.591420588982511,
        "is_binom_significant": false,
        "binom_p_value": 0.987940227612853,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.8182222192714141,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.26163750520301254,
        "relative_improvement": 0.03921568627450984,
        "absolute_improvement_ms": 1.3793103448275916,
        "old_mean_ms": 35.17241379310346,
        "new_mean_ms": 33.793103448275865,
        "old_std_ms": 7.847060257179307,
        "new_std_ms": 5.614899250748772,
        "effect_size_cohens_d": 0.2021594782877084,
        "old_ci95_ms": [
          32.18755170464737,
          38.15727588155954
        ],
        "new_ci95_ms": [
          31.657309997635927,
          35.9288968989158
        ],
        "old_ci99_ms": [
          31.14589134281986,
          39.19893624338706
        ],
        "new_ci99_ms": [
          30.91195851651166,
          36.674248380040076
        ],
        "new_times": [
          0.04,
          0.02,
          0.03,
          0.03,
          0.03,
          0.04,
          0.04,
          0.04,
          0.03,
          0.03,
          0.03,
          0.04,
          0.03,
          0.03,
          0.03,
          0.03,
          0.03,
          0.03,
          0.04,
          0.04,
          0.04,
          0.04,
          0.03,
          0.03,
          0.04,
          0.04,
          0.03,
          0.03,
          0.04
        ],
        "old_times": [
          0.04,
          0.03,
          0.02,
          0.03,
          0.03,
          0.05,
          0.04,
          0.03,
          0.04,
          0.05,
          0.02,
          0.03,
          0.03,
          0.03,
          0.04,
          0.04,
          0.05,
          0.03,
          0.03,
          0.04,
          0.03,
          0.04,
          0.04,
          0.03,
          0.04,
          0.04,
          0.03,
          0.04,
          0.03
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}