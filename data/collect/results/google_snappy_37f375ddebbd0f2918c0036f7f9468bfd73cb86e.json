{
  "metadata": {
    "collection_date": "2026-01-14T18:37:35.808714",
    "repository": "https://github.com/google/snappy",
    "repository_name": "google/snappy"
  },
  "commit_info": {
    "old_sha": "15e2a0e13ddd9c6444c8a95e611e6bda19e9c38f",
    "new_sha": "37f375ddebbd0f2918c0036f7f9468bfd73cb86e",
    "commit_message": [
      "Add prefetch to zippy decompess,\n\nPiperOrigin-RevId: 489554313"
    ],
    "commit_date": "2022-11-18T21:51:44+00:00",
    "patch": [
      "--- snappy.cc\n@@ -69,6 +69,12 @@\n #include <arm_acle.h>\n #endif\n \n+#if defined(__GNUC__)\n+#define SNAPPY_PREFETCH(ptr) __builtin_prefetch(ptr, 0, 3)\n+#else\n+#define SNAPPY_PREFETCH(ptr) (void)(ptr)\n+#endif\n+\n #include <algorithm>\n #include <array>\n #include <cstddef>\n@@ -1192,6 +1198,8 @@ std::pair<const uint8_t*, ptrdiff_t> DecompressBranchless(\n       // The throughput is limited by instructions, unrolling the inner loop\n       // twice reduces the amount of instructions checking limits and also\n       // leads to reduced mov's.\n+\n+      SNAPPY_PREFETCH(ip+128);\n       for (int i = 0; i < 2; i++) {\n         const uint8_t* old_ip = ip;\n         assert(tag == ip[-1]);"
    ],
    "files_changed": [
      {
        "filename": "snappy.cc",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "patch": "@@ -69,6 +69,12 @@\n #include <arm_acle.h>\n #endif\n \n+#if defined(__GNUC__)\n+#define SNAPPY_PREFETCH(ptr) __builtin_prefetch(ptr, 0, 3)\n+#else\n+#define SNAPPY_PREFETCH(ptr) (void)(ptr)\n+#endif\n+\n #include <algorithm>\n #include <array>\n #include <cstddef>\n@@ -1192,6 +1198,8 @@ std::pair<const uint8_t*, ptrdiff_t> DecompressBranchless(\n       // The throughput is limited by instructions, unrolling the inner loop\n       // twice reduces the amount of instructions checking limits and also\n       // leads to reduced mov's.\n+\n+      SNAPPY_PREFETCH(ip+128);\n       for (int i = 0; i < 2; i++) {\n         const uint8_t* old_ip = ip;\n         assert(tag == ip[-1]);"
      }
    ],
    "lines_added": 8,
    "lines_removed": 0
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DSNAPPY_BUILD_TESTS=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBENCHMARK_ENABLE_TESTING=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON",
    "new_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DSNAPPY_BUILD_TESTS=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBENCHMARK_ENABLE_TESTING=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON",
    "old_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/old/build -- -j 1",
    "new_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/old/build -- -j 1",
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 1.0,
    "is_pair_significant": false,
    "pair_p_value": 1.0,
    "is_binom_significant": false,
    "binom_p_value": 1.0,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999991506517764,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.8918451609195602,
    "relative_improvement": -0.0005477862988980342,
    "absolute_improvement_ms": -5.666666666668263,
    "old_mean_ms": 10344.666666666666,
    "new_mean_ms": 10350.333333333336,
    "old_std_ms": 32.34867511366112,
    "new_std_ms": 30.112814700645412,
    "effect_size_cohens_d": -0.18132899816318113,
    "old_ci95_ms": [
      10332.587472863232,
      10356.745860470102
    ],
    "new_ci95_ms": [
      10339.089023529054,
      10361.577643137616
    ],
    "old_ci99_ms": [
      10328.387360498988,
      10360.945972834346
    ],
    "new_ci99_ms": [
      10335.179212542918,
      10365.487454123751
    ],
    "new_times_s": [
      10.3,
      10.31,
      10.29,
      10.34,
      10.3,
      10.31,
      10.34,
      10.31,
      10.34,
      10.31,
      10.31,
      10.39,
      10.35,
      10.39,
      10.38,
      10.35,
      10.35,
      10.38,
      10.4,
      10.35,
      10.34,
      10.36,
      10.36,
      10.35,
      10.39,
      10.38,
      10.36,
      10.36,
      10.38,
      10.37,
      10.36
    ],
    "old_times_s": [
      10.33,
      10.33,
      10.32,
      10.29,
      10.33,
      10.3,
      10.38,
      10.31,
      10.32,
      10.37,
      10.3,
      10.35,
      10.32,
      10.34,
      10.36,
      10.34,
      10.32,
      10.34,
      10.34,
      10.34,
      10.35,
      10.46,
      10.34,
      10.38,
      10.37,
      10.36,
      10.34,
      10.35,
      10.35,
      10.38,
      10.36
    ]
  },
  "tests": {
    "total_tests": 1,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "snappy_unittest",
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 1.0,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999987542813494,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.9161306109750103,
        "relative_improvement": -0.0007001166861144737,
        "absolute_improvement_ms": -7.241379310343632,
        "old_mean_ms": 10343.103448275864,
        "new_mean_ms": 10350.344827586207,
        "old_std_ms": 31.859451196495208,
        "new_std_ms": 29.93836032115343,
        "effect_size_cohens_d": -0.23424398666712543,
        "old_ci95_ms": [
          10330.984761160084,
          10355.222135391645
        ],
        "new_ci95_ms": [
          10338.9568843585,
          10361.732770813915
        ],
        "old_ci99_ms": [
          10326.755568778057,
          10359.451327773671
        ],
        "new_ci99_ms": [
          10334.98270775955,
          10365.706947412866
        ],
        "new_times": [
          10.29,
          10.34,
          10.3,
          10.31,
          10.34,
          10.3,
          10.34,
          10.31,
          10.31,
          10.39,
          10.35,
          10.39,
          10.38,
          10.35,
          10.35,
          10.37,
          10.4,
          10.35,
          10.34,
          10.36,
          10.36,
          10.34,
          10.39,
          10.38,
          10.35,
          10.36,
          10.38,
          10.37,
          10.36
        ],
        "old_times": [
          10.32,
          10.28,
          10.33,
          10.3,
          10.37,
          10.31,
          10.32,
          10.37,
          10.3,
          10.35,
          10.32,
          10.34,
          10.36,
          10.34,
          10.32,
          10.33,
          10.34,
          10.34,
          10.34,
          10.45,
          10.34,
          10.38,
          10.37,
          10.35,
          10.34,
          10.35,
          10.35,
          10.38,
          10.36
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}