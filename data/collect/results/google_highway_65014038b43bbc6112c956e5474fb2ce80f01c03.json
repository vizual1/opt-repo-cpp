{
  "metadata": {
    "collection_date": "2026-01-14T18:40:59.659473",
    "repository": "https://github.com/google/highway",
    "repository_name": "google/highway"
  },
  "commit_info": {
    "old_sha": "34721c8610ce55c56bf376be6b99872936050e31",
    "new_sha": "65014038b43bbc6112c956e5474fb2ce80f01c03",
    "commit_message": [
      "improved AMD AVX2 codegen (4x64 instead of 2x128)\n\nPiperOrigin-RevId: 526939337"
    ],
    "commit_date": "2023-04-25T12:41:58+00:00",
    "patch": [
      "--- hwy/ops/x86_256-inl.h\n@@ -3384,15 +3384,18 @@ HWY_API Vec256<double> TwoTablesLookupLanes(Vec256<double> a, Vec256<double> b,\n \n template <typename T>\n HWY_API Vec256<T> SwapAdjacentBlocks(Vec256<T> v) {\n-  return Vec256<T>{_mm256_permute2x128_si256(v.raw, v.raw, 0x01)};\n+  return Vec256<T>{_mm256_permute4x64_epi64(v.raw, _MM_SHUFFLE(1, 0, 3, 2))};\n }\n \n-HWY_API Vec256<float> SwapAdjacentBlocks(Vec256<float> v) {\n-  return Vec256<float>{_mm256_permute2f128_ps(v.raw, v.raw, 0x01)};\n+HWY_API Vec256<double> SwapAdjacentBlocks(Vec256<double> v) {\n+  return Vec256<double>{_mm256_permute4x64_pd(v.raw, _MM_SHUFFLE(1, 0, 3, 2))};\n }\n \n-HWY_API Vec256<double> SwapAdjacentBlocks(Vec256<double> v) {\n-  return Vec256<double>{_mm256_permute2f128_pd(v.raw, v.raw, 0x01)};\n+HWY_API Vec256<float> SwapAdjacentBlocks(Vec256<float> v) {\n+  // Assume no domain-crossing penalty between float/double (true on SKX).\n+  const DFromV<decltype(v)> d;\n+  const RepartitionToWide<decltype(d)> dw;\n+  return BitCast(d, SwapAdjacentBlocks(BitCast(dw, v)));\n }\n \n // ------------------------------ Reverse (RotateRight)\n@@ -3969,11 +3972,11 @@ HWY_API Vec256<double> OddEvenBlocks(Vec256<double> odd, Vec256<double> even) {\n   return Vec256<double>{_mm256_blend_pd(odd.raw, even.raw, 0x3u)};\n }\n \n-// ------------------------------ ReverseBlocks (ConcatLowerUpper)\n+// ------------------------------ ReverseBlocks (SwapAdjacentBlocks)\n \n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> ReverseBlocks(D d, Vec256<T> v) {\n-  return ConcatLowerUpper(d, v, v);\n+HWY_API Vec256<T> ReverseBlocks(D /*d*/, Vec256<T> v) {\n+  return SwapAdjacentBlocks(v);\n }\n \n // ------------------------------ TableLookupBytes (ZeroExtendVector)\n@@ -6160,18 +6163,18 @@ HWY_API Vec256<int16_t> MaxOfLanes(hwy::SizeTag<2> /* tag */,\n \n // Supported for {uif}{32,64},{ui}16. Returns the broadcasted result.\n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> SumOfLanes(D d, const Vec256<T> vHL) {\n-  const Vec256<T> vLH = ConcatLowerUpper(d, vHL, vHL);\n+HWY_API Vec256<T> SumOfLanes(D /*d*/, const Vec256<T> vHL) {\n+  const Vec256<T> vLH = SwapAdjacentBlocks(vHL);\n   return detail::SumOfLanes(hwy::SizeTag<sizeof(T)>(), vLH + vHL);\n }\n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> MinOfLanes(D d, const Vec256<T> vHL) {\n-  const Vec256<T> vLH = ConcatLowerUpper(d, vHL, vHL);\n+HWY_API Vec256<T> MinOfLanes(D /*d*/, const Vec256<T> vHL) {\n+  const Vec256<T> vLH = SwapAdjacentBlocks(vHL);\n   return detail::MinOfLanes(hwy::SizeTag<sizeof(T)>(), Min(vLH, vHL));\n }\n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> MaxOfLanes(D d, const Vec256<T> vHL) {\n-  const Vec256<T> vLH = ConcatLowerUpper(d, vHL, vHL);\n+HWY_API Vec256<T> MaxOfLanes(D /*d*/, const Vec256<T> vHL) {\n+  const Vec256<T> vLH = SwapAdjacentBlocks(vHL);\n   return detail::MaxOfLanes(hwy::SizeTag<sizeof(T)>(), Max(vLH, vHL));\n }\n "
    ],
    "files_changed": [
      {
        "filename": "hwy/ops/x86_256-inl.h",
        "status": "modified",
        "additions": 17,
        "deletions": 14,
        "changes": 31,
        "patch": "@@ -3384,15 +3384,18 @@ HWY_API Vec256<double> TwoTablesLookupLanes(Vec256<double> a, Vec256<double> b,\n \n template <typename T>\n HWY_API Vec256<T> SwapAdjacentBlocks(Vec256<T> v) {\n-  return Vec256<T>{_mm256_permute2x128_si256(v.raw, v.raw, 0x01)};\n+  return Vec256<T>{_mm256_permute4x64_epi64(v.raw, _MM_SHUFFLE(1, 0, 3, 2))};\n }\n \n-HWY_API Vec256<float> SwapAdjacentBlocks(Vec256<float> v) {\n-  return Vec256<float>{_mm256_permute2f128_ps(v.raw, v.raw, 0x01)};\n+HWY_API Vec256<double> SwapAdjacentBlocks(Vec256<double> v) {\n+  return Vec256<double>{_mm256_permute4x64_pd(v.raw, _MM_SHUFFLE(1, 0, 3, 2))};\n }\n \n-HWY_API Vec256<double> SwapAdjacentBlocks(Vec256<double> v) {\n-  return Vec256<double>{_mm256_permute2f128_pd(v.raw, v.raw, 0x01)};\n+HWY_API Vec256<float> SwapAdjacentBlocks(Vec256<float> v) {\n+  // Assume no domain-crossing penalty between float/double (true on SKX).\n+  const DFromV<decltype(v)> d;\n+  const RepartitionToWide<decltype(d)> dw;\n+  return BitCast(d, SwapAdjacentBlocks(BitCast(dw, v)));\n }\n \n // ------------------------------ Reverse (RotateRight)\n@@ -3969,11 +3972,11 @@ HWY_API Vec256<double> OddEvenBlocks(Vec256<double> odd, Vec256<double> even) {\n   return Vec256<double>{_mm256_blend_pd(odd.raw, even.raw, 0x3u)};\n }\n \n-// ------------------------------ ReverseBlocks (ConcatLowerUpper)\n+// ------------------------------ ReverseBlocks (SwapAdjacentBlocks)\n \n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> ReverseBlocks(D d, Vec256<T> v) {\n-  return ConcatLowerUpper(d, v, v);\n+HWY_API Vec256<T> ReverseBlocks(D /*d*/, Vec256<T> v) {\n+  return SwapAdjacentBlocks(v);\n }\n \n // ------------------------------ TableLookupBytes (ZeroExtendVector)\n@@ -6160,18 +6163,18 @@ HWY_API Vec256<int16_t> MaxOfLanes(hwy::SizeTag<2> /* tag */,\n \n // Supported for {uif}{32,64},{ui}16. Returns the broadcasted result.\n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> SumOfLanes(D d, const Vec256<T> vHL) {\n-  const Vec256<T> vLH = ConcatLowerUpper(d, vHL, vHL);\n+HWY_API Vec256<T> SumOfLanes(D /*d*/, const Vec256<T> vHL) {\n+  const Vec256<T> vLH = SwapAdjacentBlocks(vHL);\n   return detail::SumOfLanes(hwy::SizeTag<sizeof(T)>(), vLH + vHL);\n }\n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> MinOfLanes(D d, const Vec256<T> vHL) {\n-  const Vec256<T> vLH = ConcatLowerUpper(d, vHL, vHL);\n+HWY_API Vec256<T> MinOfLanes(D /*d*/, const Vec256<T> vHL) {\n+  const Vec256<T> vLH = SwapAdjacentBlocks(vHL);\n   return detail::MinOfLanes(hwy::SizeTag<sizeof(T)>(), Min(vLH, vHL));\n }\n template <class D, typename T = TFromD<D>>\n-HWY_API Vec256<T> MaxOfLanes(D d, const Vec256<T> vHL) {\n-  const Vec256<T> vLH = ConcatLowerUpper(d, vHL, vHL);\n+HWY_API Vec256<T> MaxOfLanes(D /*d*/, const Vec256<T> vHL) {\n+  const Vec256<T> vLH = SwapAdjacentBlocks(vHL);\n   return detail::MaxOfLanes(hwy::SizeTag<sizeof(T)>(), Max(vLH, vHL));\n }\n "
      }
    ],
    "lines_added": 17,
    "lines_removed": 14
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
    "new_build_script": "#!/bin/bash\n#!/bin/bash\ncmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
    "old_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/old/build -- -j 1",
    "new_test_script": "#!/bin/bash\ncmake --build /test_workspace/workspace/new/build -- -j 1",
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 1.0,
    "is_pair_significant": false,
    "pair_p_value": 1.0,
    "is_binom_significant": false,
    "binom_p_value": 1.0,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999991338918834,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.15379081540546002,
    "relative_improvement": 0.0011035760438227397,
    "absolute_improvement_ms": 128.6666666666889,
    "old_mean_ms": 116590.66666666667,
    "new_mean_ms": 116461.99999999999,
    "old_std_ms": 503.90840255042303,
    "new_std_ms": 476.0788112096138,
    "effect_size_cohens_d": 0.26248264294203194,
    "old_ci95_ms": [
      116402.50417679037,
      116778.82915654298
    ],
    "new_ci95_ms": [
      116284.22925031382,
      116639.77074968617
    ],
    "old_ci99_ms": [
      116337.0773268634,
      116844.25600646996
    ],
    "new_ci99_ms": [
      116222.41576044784,
      116701.58423955213
    ],
    "new_times_s": [
      116.03,
      115.97,
      115.88,
      115.81,
      116.07,
      116.02,
      116.94,
      115.8,
      115.81,
      116.14,
      116.23,
      116.01,
      115.99,
      116.17,
      116.38,
      116.97,
      116.71,
      116.64,
      117.26,
      116.5,
      116.53,
      117.09,
      116.23,
      116.9,
      117.08,
      116.49,
      116.31,
      116.58,
      117.29,
      117.21,
      116.85
    ],
    "old_times_s": [
      115.76,
      115.91,
      115.64,
      116.39,
      116.0,
      115.77,
      116.67,
      115.86,
      116.79,
      115.96,
      116.15,
      116.24,
      116.05,
      116.17,
      116.39,
      117.19,
      117.08,
      116.81,
      117.13,
      116.65,
      117.1,
      117.05,
      117.03,
      117.08,
      116.57,
      116.81,
      117.19,
      117.16,
      116.65,
      117.1,
      117.13
    ]
  },
  "tests": {
    "total_tests": 1,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "NanobenchmarkTest.RunAll",
        "is_significant": false,
        "p_value": 0.5255040751826904,
        "is_pair_significant": false,
        "pair_p_value": 0.5227946355529819,
        "is_binom_significant": false,
        "binom_p_value": 0.355535551905632,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.37691569391025476,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.1790780516992816,
        "relative_improvement": 0.04721362229102163,
        "absolute_improvement_ms": 21.034482758620634,
        "old_mean_ms": 445.51724137931035,
        "new_mean_ms": 424.48275862068976,
        "old_std_ms": 74.19020954356596,
        "new_std_ms": 76.51266033878464,
        "effect_size_cohens_d": 0.2791185788742928,
        "old_ci95_ms": [
          417.29679492630913,
          473.7376878323116
        ],
        "new_ci95_ms": [
          395.37889913098974,
          453.58661811038974
        ],
        "old_ci99_ms": [
          407.4483933613402,
          483.58608939728055
        ],
        "new_ci99_ms": [
          385.2222031402885,
          463.74331410109096
        ],
        "new_times": [
          0.43,
          0.43,
          0.52,
          0.46,
          0.5,
          0.39,
          0.36,
          0.48,
          0.56,
          0.41,
          0.37,
          0.51,
          0.36,
          0.34,
          0.39,
          0.38,
          0.29,
          0.32,
          0.42,
          0.53,
          0.46,
          0.51,
          0.3,
          0.41,
          0.31,
          0.48,
          0.52,
          0.49,
          0.38
        ],
        "old_times": [
          0.4,
          0.48,
          0.55,
          0.35,
          0.45,
          0.55,
          0.44,
          0.58,
          0.54,
          0.47,
          0.51,
          0.48,
          0.43,
          0.45,
          0.37,
          0.48,
          0.46,
          0.49,
          0.36,
          0.35,
          0.48,
          0.27,
          0.5,
          0.44,
          0.43,
          0.46,
          0.33,
          0.34,
          0.48
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}