{
    "metadata": {
        "collection_date": "2026-01-14T18:38:20.108244",
        "repository": "https://github.com/quick-lint/quick-lint-js",
        "repository_name": "quick-lint/quick-lint-js"
    },
    "commit_info": {
        "old_sha": "a3f98e9f91d9f5c5b2d375047317cf88dc59efc9",
        "new_sha": "f84fb894b772140b2cca39f48eef333b14af1b30",
        "commit_message": [
            "refactor(tools): parse events only once"
        ],
        "commit_date": "2023-03-04T09:46:18+00:00",
        "patch": [
            "--- tools/analyze-trace.cpp\n@@ -536,25 +536,23 @@ int main(int argc, char** argv) {\n     file.error().print_and_exit();\n   }\n \n+  trace_reader reader;\n+  reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n+  std::vector<parsed_trace_event> events = reader.pull_new_events();\n+\n   if (o.check_document_consistency) {\n-    trace_reader reader;\n-    reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n     document_content_checker checker;\n-    visit_events(reader.pull_new_events(), checker);\n+    visit_events(events, checker);\n   }\n \n   if (o.dump_document_content_document_id.has_value()) {\n-    trace_reader reader;\n-    reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n     document_content_dumper dumper(*o.dump_document_content_document_id,\n                                    o.end_event_index);\n-    visit_events(reader.pull_new_events(), dumper);\n+    visit_events(events, dumper);\n     dumper.print_document_content();\n   } else if (!o.check_document_consistency) {\n-    trace_reader reader;\n-    reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n     event_dumper dumper(o.begin_event_index, o.end_event_index);\n-    visit_events(reader.pull_new_events(), dumper);\n+    visit_events(events, dumper);\n   }\n \n   return 0;"
        ],
        "files_changed": [
            {
                "filename": "tools/analyze-trace.cpp",
                "status": "modified",
                "additions": 7,
                "deletions": 9,
                "changes": 16,
                "patch": "@@ -536,25 +536,23 @@ int main(int argc, char** argv) {\n     file.error().print_and_exit();\n   }\n \n+  trace_reader reader;\n+  reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n+  std::vector<parsed_trace_event> events = reader.pull_new_events();\n+\n   if (o.check_document_consistency) {\n-    trace_reader reader;\n-    reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n     document_content_checker checker;\n-    visit_events(reader.pull_new_events(), checker);\n+    visit_events(events, checker);\n   }\n \n   if (o.dump_document_content_document_id.has_value()) {\n-    trace_reader reader;\n-    reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n     document_content_dumper dumper(*o.dump_document_content_document_id,\n                                    o.end_event_index);\n-    visit_events(reader.pull_new_events(), dumper);\n+    visit_events(events, dumper);\n     dumper.print_document_content();\n   } else if (!o.check_document_consistency) {\n-    trace_reader reader;\n-    reader.append_bytes(file->data(), narrow_cast<std::size_t>(file->size()));\n     event_dumper dumper(o.begin_event_index, o.end_event_index);\n-    visit_events(reader.pull_new_events(), dumper);\n+    visit_events(events, dumper);\n   }\n \n   return 0;"
            }
        ],
        "lines_added": 7,
        "lines_removed": 9
    },
    "issues": [],
    "pull_requests": [],
    "build_info": {
        "old_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON -DBUILD_TESTING=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBENCHMARK_USE_BUNDLED_GTEST=ON -DBENCHMARK_ENABLE_TESTING=ON",
            "cmake --build /test_workspace/workspace/old/build -- -j 1"
        ],
        "new_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBENCHMARK_ENABLE_ASSEMBLY_TESTS=ON -DBUILD_TESTING=ON -DBENCHMARK_ENABLE_GTEST_TESTS=ON -DBENCHMARK_USE_BUNDLED_GTEST=ON -DBENCHMARK_ENABLE_TESTING=ON",
            "cmake --build /test_workspace/workspace/new/build -- -j 1"
        ],
        "old_test_script": [
            "cd /test_workspace/workspace/old/build",
            "ctest --output-on-failure"
        ],
        "new_test_script": [
            "cd /test_workspace/workspace/new/build",
            "ctest --output-on-failure"
        ],
        "build_system": "cmake"
    },
    "performance_analysis": {
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 1.0,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999995225542617,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.8615764530671188,
        "relative_improvement": -0.0017331022530329538,
        "absolute_improvement_ms": -1.6666666666667052,
        "old_mean_ms": 961.6666666666666,
        "new_mean_ms": 963.3333333333334,
        "old_std_ms": 5.9209349991676055,
        "new_std_ms": 5.4667227359053445,
        "effect_size_cohens_d": -0.292482004085496,
        "old_ci95_ms": [
            959.4557532026316,
            963.8775801307016
        ],
        "new_ci95_ms": [
            961.2920255157912,
            965.3746411508755
        ],
        "old_ci99_ms": [
            958.6869862528105,
            964.6463470805229
        ],
        "new_ci99_ms": [
            960.5822329300272,
            966.0844337366395
        ],
        "new_times_s": [
            0.97,
            0.96,
            0.96,
            0.96,
            0.96,
            0.97,
            0.97,
            0.95,
            0.96,
            0.96,
            0.96,
            0.97,
            0.96,
            0.96,
            0.97,
            0.97,
            0.96,
            0.96,
            0.96,
            0.97,
            0.97,
            0.97,
            0.97,
            0.97,
            0.96,
            0.96,
            0.97,
            0.96,
            0.96,
            0.96,
            0.96
        ],
        "old_times_s": [
            0.95,
            0.96,
            0.96,
            0.96,
            0.96,
            0.96,
            0.97,
            0.97,
            0.96,
            0.97,
            0.96,
            0.96,
            0.95,
            0.95,
            0.96,
            0.97,
            0.97,
            0.96,
            0.96,
            0.96,
            0.97,
            0.96,
            0.95,
            0.96,
            0.96,
            0.96,
            0.97,
            0.97,
            0.96,
            0.96,
            0.96
        ]
    },
    "tests": {
        "total_tests": 2,
        "significant_improvements": 0,
        "significant_improvements_tests": [],
        "significant_regressions": 0,
        "significant_regressions_tests": [],
        "significant_pair_improvements": 0,
        "significant_pair_improvements_tests": [],
        "significant_pair_regressions": 0,
        "significant_pair_regressions_tests": [],
        "significant_binom_improvements": 0,
        "significant_binom_improvements_tests": [],
        "significant_binom_regressions": 0,
        "significant_binom_regressions_tests": [],
        "significant_wilcoxon_improvements": 0,
        "significant_wilcoxon_improvements_tests": [],
        "significant_wilcoxon_regressions": 0,
        "significant_wilcoxon_regressions_tests": [],
        "significant_mannwhitney_improvements": 0,
        "significant_mannwhitney_improvements_tests": [],
        "significant_mannwhitney_regressions": 1,
        "significant_mannwhitney_regressions_tests": [
            "quick-lint-js-test"
        ],
        "tests": [
            {
                "test_name": "quick-lint-js-test",
                "is_significant": false,
                "p_value": 1.0,
                "is_pair_significant": false,
                "pair_p_value": 1.0,
                "is_binom_significant": false,
                "binom_p_value": 1.0,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.9999992100120968,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 0.9568929759936595,
                "relative_improvement": -0.0036784025223331727,
                "absolute_improvement_ms": -2.4137931034483584,
                "old_mean_ms": 656.2068965517242,
                "new_mean_ms": 658.6206896551726,
                "old_std_ms": 5.614899250748776,
                "new_std_ms": 5.15761429555128,
                "effect_size_cohens_d": -0.4477360414672561,
                "old_ci95_ms": [
                    654.0711031010842,
                    658.3426900023641
                ],
                "new_ci95_ms": [
                    656.6588380989052,
                    660.5825412114398
                ],
                "old_ci99_ms": [
                    653.32575161996,
                    659.0880414834883
                ],
                "new_ci99_ms": [
                    655.9741890459869,
                    661.2671902643581
                ],
                "new_times": [
                    0.65,
                    0.66,
                    0.66,
                    0.66,
                    0.66,
                    0.65,
                    0.66,
                    0.66,
                    0.66,
                    0.66,
                    0.65,
                    0.66,
                    0.67,
                    0.66,
                    0.65,
                    0.66,
                    0.66,
                    0.67,
                    0.66,
                    0.66,
                    0.66,
                    0.66,
                    0.65,
                    0.65,
                    0.66,
                    0.66,
                    0.66,
                    0.66,
                    0.66
                ],
                "old_times": [
                    0.65,
                    0.65,
                    0.65,
                    0.66,
                    0.67,
                    0.66,
                    0.65,
                    0.66,
                    0.66,
                    0.66,
                    0.65,
                    0.65,
                    0.65,
                    0.66,
                    0.66,
                    0.65,
                    0.66,
                    0.66,
                    0.66,
                    0.66,
                    0.65,
                    0.65,
                    0.66,
                    0.65,
                    0.66,
                    0.66,
                    0.66,
                    0.66,
                    0.65
                ]
            },
            {
                "test_name": "quick-lint-js-test-cli",
                "is_significant": false,
                "p_value": 1.0,
                "is_pair_significant": false,
                "pair_p_value": 1.0,
                "is_binom_significant": false,
                "binom_p_value": 1.0,
                "is_wilcoxon_significant": false,
                "wilcoxon_p_value": 0.9999999638108507,
                "is_mannwhitney_significant": false,
                "mannwhitney_p_value": 1.0,
                "relative_improvement": 0.0,
                "absolute_improvement_ms": 0.0,
                "old_mean_ms": 100.00000000000003,
                "new_mean_ms": 100.00000000000003,
                "old_std_ms": 2.824686288200359e-14,
                "new_std_ms": 2.824686288200359e-14,
                "effect_size_cohens_d": 0.0,
                "old_ci95_ms": [
                    100.00000000000001,
                    100.00000000000004
                ],
                "new_ci95_ms": [
                    100.00000000000001,
                    100.00000000000004
                ],
                "old_ci99_ms": [
                    100.00000000000001,
                    100.00000000000004
                ],
                "new_ci99_ms": [
                    100.00000000000001,
                    100.00000000000004
                ],
                "new_times": [
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1
                ],
                "old_times": [
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1,
                    0.1
                ]
            }
        ]
    },
    "logs": {
        "full_log_path": "/logs/full.log",
        "config_log_path": "/logs/config.log",
        "build_log_path": "/logs/build.log",
        "test_log_path": "/logs/test.log",
        "build_success": true,
        "test_success": true
    },
    "raw_timing_data": {
        "warmup_runs": 1,
        "measurement_runs": 30,
        "min_exec_time_improvement": 0.05,
        "min_p_value": 0.05
    }
}