{
    "metadata": {
        "collection_date": "2026-01-14T18:37:32.044938",
        "repository": "https://github.com/DescentDevelopers/Descent3",
        "repository_name": "DescentDevelopers/Descent3"
    },
    "commit_info": {
        "old_sha": "c6da74b0696ae59f6d44d3ab766b0133a2d1d5b0",
        "new_sha": "8d3b2f8877b35566004d7a59c8322b4daf811d17",
        "commit_message": [
            "C++ Algorithm pokes (#304)\n\n* Use std::max and std::min, with an initializer_list where possilbe.\r\n\r\n* Use std::clamp where appropriate.\r\n\r\n* Missed a couple of them.\r\n\r\n* Remove clamp specializations at @Lgt2x suggestion."
        ],
        "commit_date": "2024-05-08T09:04:52+00:00",
        "patch": [
            "--- Descent3/Player.cpp\n@@ -3734,8 +3734,7 @@ void DoEnergyToShields(int pnum) {\n     return;\n   }\n \n-  amount = std::min(Frametime * CONVERTER_RATE, Players[pnum].energy - INITIAL_ENERGY);\n-  amount = std::min(amount, (MAX_SHIELDS - Objects[Players[pnum].objnum].shields) * CONVERTER_SCALE);\n+  amount = std::min({Frametime * CONVERTER_RATE, Players[pnum].energy - INITIAL_ENERGY, (MAX_SHIELDS - Objects[Players[pnum].objnum].shields) * CONVERTER_SCALE});\n \n   Players[pnum].energy -= amount;\n \n--- Descent3/lighting.cpp\n@@ -2013,8 +2013,7 @@ void DestroyLight(int roomnum, int facenum) {\n   b = GameTextures[destroy_fp->tmap].b * mul;\n \n   // Get highest component\n-  float rmax = std::max(r, g);\n-  rmax = std::max(rmax, b);\n+  float rmax = std::max({r, g, b});\n \n   // Get the normalized color that this face emits\n   float red_scale = r / rmax;\n--- Descent3/multi_server.cpp\n@@ -2031,8 +2031,7 @@ void MultiSendPositionalUpdates(int to_slot) {\n             dp=fabs(dp);\n \n             pps_check_time=((float)pps_check_time/2.0)+((dp*((float)pps_check_time/2.0))+(dp*.9));\n-            pps_check_time=std::max(pps_check_time,6.0);\n-            pps_check_time=std::min(pps_check_time,20.0);\n+            pps_check_time=std::clamp(pps_check_time,6.0,20.0);\n \n             int pps=pps_check_time;\n             pps_check_time=pps;\n--- Descent3/render.cpp\n@@ -2437,8 +2437,7 @@ void RenderSingleLightGlow(int index) {\n   facing_scalar *= Room_light_val;\n   rend_SetAlphaValue(facing_scalar * .4 * 255);\n \n-  float maxc = std::max(texp->r, texp->g);\n-  maxc = std::max(texp->b, maxc);\n+  float maxc = std::max({texp->r, texp->g, texp->b});\n   float r, g, b;\n   if (maxc > 1.0) {\n     r = texp->r / maxc;\n@@ -2482,8 +2481,7 @@ void RenderSingleLightGlow2(int index) {\n     first = 0;\n   }\n   rend_SetAlphaValue(.4 * 255);\n-  float maxc = std::max(texp->r, texp->g);\n-  maxc = std::max(texp->b, maxc);\n+  float maxc = std::max({texp->r, texp->g, texp->b});\n   float r, g, b;\n   if (maxc > 1.0) {\n     r = texp->r / maxc;\n--- Descent3/terrain.cpp\n@@ -390,8 +390,7 @@ void DeformTerrainPoint(int x, int z, int change_height) {\n \n   change_height += tseg->ypos;\n \n-  change_height = std::min(255, change_height);\n-  change_height = std::max(0, change_height);\n+  change_height = std::clamp(change_height, 0, 255);\n \n   tseg->ypos = change_height;\n   tseg->y = tseg->ypos * TERRAIN_HEIGHT_INCREMENT;\n@@ -751,8 +750,7 @@ void SetupSky(float radius, int flags, ubyte randit) {\n     float ynorm = starvec.y / (Terrain_sky.radius * 500);\n \n     float color_norm = ynorm * 2;\n-    color_norm = std::min<float>(1.0, color_norm);\n-    color_norm = std::max<float>(.2, color_norm);\n+    color_norm = std::clamp(color_norm, 0.2f, 1.0f);\n     int color = ps_rand() % 6;\n     int r, g, b;\n \n--- Descent3/terrainrender.cpp\n@@ -2099,8 +2099,7 @@ void DrawSky(vector *veye, matrix *vorient) {\n       float str = Terrain_sky.satellite_r[i];\n       float stg = Terrain_sky.satellite_g[i];\n       float stb = Terrain_sky.satellite_b[i];\n-      float maxc = std::max(str, stg);\n-      maxc = std::max(stb, maxc);\n+      float maxc = std::max({str, stg, stb});\n       float r, g, b;\n       if (maxc > 1.0) {\n         r = str / maxc;\n--- Descent3/viseffect.cpp\n@@ -2234,8 +2234,7 @@ void AttachRandomNapalmEffectsToObject(object *obj) {\n \n   float size_scalar = obj->size / 7.0;\n \n-  size_scalar = std::max<float>(1.0, size_scalar);\n-  size_scalar = std::min<float>(4.0, size_scalar);\n+  size_scalar = std::clamp(size_scalar, 1.0f, 4.0f);\n \n   // Create an explosion that follows every now and then\n   if ((ps_rand() % 3) == 0) {\n--- netgames/dmfc/dmfcstats.cpp\n@@ -1427,7 +1427,7 @@ void CDmfcStats::DoFrame() {\n     memcpy(m_translate, temp_array, sizeof(int) * MAX_PLAYER_RECORDS);\n   }\n \n-  m_MaxCount = std::min(high_count, std::min(count, index));\n+  m_MaxCount = std::min({high_count, count, index});\n \n   pr = PRec_GetPRecord(m_selected_prec);\n   if (!pr || pr->state != last_state) {\n--- netgames/monsterball/monsterball.cpp\n@@ -2034,8 +2034,7 @@ void bump_object(object *object0, vector *rotvel, vector *velocity, vector *pos,\n \n   new_vel /= mag;\n \n-  mag = std::min(mag, 20.0f);\n-  mag = std::max(mag, 10.0f);\n+  mag = std::clamp(mag, 10.0f, 20.0f);\n \n   new_vel *= mag;\n \n--- renderer/HardwareOpenGL.cpp\n@@ -2854,7 +2854,7 @@ void rend_DrawSpecialLine(g3Point *p0, g3Point *p1) {\n     }\n \n     // Finally, specify a vertex\n-    float z = std::max<double>(0, std::min(1.0, 1.0 - (1.0 / (pnt->p3_z + Z_bias))));\n+    float z = std::clamp(1.0 - (1.0 / (pnt->p3_z + Z_bias)), 0.0, 1.0);\n     dglVertex3f(pnt->p3_sx + x_add, pnt->p3_sy + y_add, -z);\n   }\n "
        ],
        "files_changed": [
            {
                "filename": "Descent3/Player.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 2,
                "changes": 3,
                "patch": "@@ -3734,8 +3734,7 @@ void DoEnergyToShields(int pnum) {\n     return;\n   }\n \n-  amount = std::min(Frametime * CONVERTER_RATE, Players[pnum].energy - INITIAL_ENERGY);\n-  amount = std::min(amount, (MAX_SHIELDS - Objects[Players[pnum].objnum].shields) * CONVERTER_SCALE);\n+  amount = std::min({Frametime * CONVERTER_RATE, Players[pnum].energy - INITIAL_ENERGY, (MAX_SHIELDS - Objects[Players[pnum].objnum].shields) * CONVERTER_SCALE});\n \n   Players[pnum].energy -= amount;\n "
            },
            {
                "filename": "Descent3/lighting.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 2,
                "changes": 3,
                "patch": "@@ -2013,8 +2013,7 @@ void DestroyLight(int roomnum, int facenum) {\n   b = GameTextures[destroy_fp->tmap].b * mul;\n \n   // Get highest component\n-  float rmax = std::max(r, g);\n-  rmax = std::max(rmax, b);\n+  float rmax = std::max({r, g, b});\n \n   // Get the normalized color that this face emits\n   float red_scale = r / rmax;"
            },
            {
                "filename": "Descent3/multi_server.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 2,
                "changes": 3,
                "patch": "@@ -2031,8 +2031,7 @@ void MultiSendPositionalUpdates(int to_slot) {\n             dp=fabs(dp);\n \n             pps_check_time=((float)pps_check_time/2.0)+((dp*((float)pps_check_time/2.0))+(dp*.9));\n-            pps_check_time=std::max(pps_check_time,6.0);\n-            pps_check_time=std::min(pps_check_time,20.0);\n+            pps_check_time=std::clamp(pps_check_time,6.0,20.0);\n \n             int pps=pps_check_time;\n             pps_check_time=pps;"
            },
            {
                "filename": "Descent3/render.cpp",
                "status": "modified",
                "additions": 2,
                "deletions": 4,
                "changes": 6,
                "patch": "@@ -2437,8 +2437,7 @@ void RenderSingleLightGlow(int index) {\n   facing_scalar *= Room_light_val;\n   rend_SetAlphaValue(facing_scalar * .4 * 255);\n \n-  float maxc = std::max(texp->r, texp->g);\n-  maxc = std::max(texp->b, maxc);\n+  float maxc = std::max({texp->r, texp->g, texp->b});\n   float r, g, b;\n   if (maxc > 1.0) {\n     r = texp->r / maxc;\n@@ -2482,8 +2481,7 @@ void RenderSingleLightGlow2(int index) {\n     first = 0;\n   }\n   rend_SetAlphaValue(.4 * 255);\n-  float maxc = std::max(texp->r, texp->g);\n-  maxc = std::max(texp->b, maxc);\n+  float maxc = std::max({texp->r, texp->g, texp->b});\n   float r, g, b;\n   if (maxc > 1.0) {\n     r = texp->r / maxc;"
            },
            {
                "filename": "Descent3/terrain.cpp",
                "status": "modified",
                "additions": 2,
                "deletions": 4,
                "changes": 6,
                "patch": "@@ -390,8 +390,7 @@ void DeformTerrainPoint(int x, int z, int change_height) {\n \n   change_height += tseg->ypos;\n \n-  change_height = std::min(255, change_height);\n-  change_height = std::max(0, change_height);\n+  change_height = std::clamp(change_height, 0, 255);\n \n   tseg->ypos = change_height;\n   tseg->y = tseg->ypos * TERRAIN_HEIGHT_INCREMENT;\n@@ -751,8 +750,7 @@ void SetupSky(float radius, int flags, ubyte randit) {\n     float ynorm = starvec.y / (Terrain_sky.radius * 500);\n \n     float color_norm = ynorm * 2;\n-    color_norm = std::min<float>(1.0, color_norm);\n-    color_norm = std::max<float>(.2, color_norm);\n+    color_norm = std::clamp(color_norm, 0.2f, 1.0f);\n     int color = ps_rand() % 6;\n     int r, g, b;\n "
            },
            {
                "filename": "Descent3/terrainrender.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 2,
                "changes": 3,
                "patch": "@@ -2099,8 +2099,7 @@ void DrawSky(vector *veye, matrix *vorient) {\n       float str = Terrain_sky.satellite_r[i];\n       float stg = Terrain_sky.satellite_g[i];\n       float stb = Terrain_sky.satellite_b[i];\n-      float maxc = std::max(str, stg);\n-      maxc = std::max(stb, maxc);\n+      float maxc = std::max({str, stg, stb});\n       float r, g, b;\n       if (maxc > 1.0) {\n         r = str / maxc;"
            },
            {
                "filename": "Descent3/viseffect.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 2,
                "changes": 3,
                "patch": "@@ -2234,8 +2234,7 @@ void AttachRandomNapalmEffectsToObject(object *obj) {\n \n   float size_scalar = obj->size / 7.0;\n \n-  size_scalar = std::max<float>(1.0, size_scalar);\n-  size_scalar = std::min<float>(4.0, size_scalar);\n+  size_scalar = std::clamp(size_scalar, 1.0f, 4.0f);\n \n   // Create an explosion that follows every now and then\n   if ((ps_rand() % 3) == 0) {"
            },
            {
                "filename": "netgames/dmfc/dmfcstats.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "patch": "@@ -1427,7 +1427,7 @@ void CDmfcStats::DoFrame() {\n     memcpy(m_translate, temp_array, sizeof(int) * MAX_PLAYER_RECORDS);\n   }\n \n-  m_MaxCount = std::min(high_count, std::min(count, index));\n+  m_MaxCount = std::min({high_count, count, index});\n \n   pr = PRec_GetPRecord(m_selected_prec);\n   if (!pr || pr->state != last_state) {"
            },
            {
                "filename": "netgames/monsterball/monsterball.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 2,
                "changes": 3,
                "patch": "@@ -2034,8 +2034,7 @@ void bump_object(object *object0, vector *rotvel, vector *velocity, vector *pos,\n \n   new_vel /= mag;\n \n-  mag = std::min(mag, 20.0f);\n-  mag = std::max(mag, 10.0f);\n+  mag = std::clamp(mag, 10.0f, 20.0f);\n \n   new_vel *= mag;\n "
            },
            {
                "filename": "renderer/HardwareOpenGL.cpp",
                "status": "modified",
                "additions": 1,
                "deletions": 1,
                "changes": 2,
                "patch": "@@ -2854,7 +2854,7 @@ void rend_DrawSpecialLine(g3Point *p0, g3Point *p1) {\n     }\n \n     // Finally, specify a vertex\n-    float z = std::max<double>(0, std::min(1.0, 1.0 - (1.0 / (pnt->p3_z + Z_bias))));\n+    float z = std::clamp(1.0 - (1.0 / (pnt->p3_z + Z_bias)), 0.0, 1.0);\n     dglVertex3f(pnt->p3_sx + x_add, pnt->p3_sy + y_add, -z);\n   }\n "
            }
        ],
        "lines_added": 12,
        "lines_removed": 22
    },
    "issues": [],
    "pull_requests": [],
    "build_info": {
        "old_build_script": [
            "apt-get update",
            "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON",
            "cmake --build /test_workspace/workspace/old/build -- -j 1"
        ],
        "new_build_script": [
            "apt-get update",
            "apt-get install -y libsdl2-dev",
            "apt-get install -y libncurses-dev",
            "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON",
            "cmake --build /test_workspace/workspace/new/build -- -j 1"
        ],
        "old_test_script": [
            "cd /test_workspace/workspace/old/build",
            "ctest --output-on-failure"
        ],
        "new_test_script": [
            "cd /test_workspace/workspace/new/build",
            "ctest --output-on-failure"
        ],
        "build_system": "cmake"
    },
    "performance_analysis": {
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 1.0,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999999783976847,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 1.0,
        "relative_improvement": 0.0,
        "absolute_improvement_ms": 0.0,
        "old_mean_ms": 20.000000000000004,
        "new_mean_ms": 20.000000000000004,
        "old_std_ms": 3.5287580338023136e-15,
        "new_std_ms": 3.5287580338023136e-15,
        "effect_size_cohens_d": 0.0,
        "old_ci95_ms": [
            20.000000000000004,
            20.000000000000004
        ],
        "new_ci95_ms": [
            20.000000000000004,
            20.000000000000004
        ],
        "old_ci99_ms": [
            20.0,
            20.000000000000007
        ],
        "new_ci99_ms": [
            20.0,
            20.000000000000007
        ],
        "new_times_s": [
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02
        ],
        "old_times_s": [
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02,
            0.02
        ]
    },
    "tests": {
        "total_tests": 0,
        "significant_improvements": 0,
        "significant_improvements_tests": [],
        "significant_regressions": 0,
        "significant_regressions_tests": [],
        "significant_pair_improvements": 0,
        "significant_pair_improvements_tests": [],
        "significant_pair_regressions": 0,
        "significant_pair_regressions_tests": [],
        "significant_binom_improvements": 0,
        "significant_binom_improvements_tests": [],
        "significant_binom_regressions": 0,
        "significant_binom_regressions_tests": [],
        "significant_wilcoxon_improvements": 0,
        "significant_wilcoxon_improvements_tests": [],
        "significant_wilcoxon_regressions": 0,
        "significant_wilcoxon_regressions_tests": [],
        "significant_mannwhitney_improvements": 0,
        "significant_mannwhitney_improvements_tests": [],
        "significant_mannwhitney_regressions": 0,
        "significant_mannwhitney_regressions_tests": [],
        "tests": []
    },
    "logs": {
        "full_log_path": "/logs/full.log",
        "config_log_path": "/logs/config.log",
        "build_log_path": "/logs/build.log",
        "test_log_path": "/logs/test.log",
        "build_success": true,
        "test_success": true
    },
    "raw_timing_data": {
        "warmup_runs": 1,
        "measurement_runs": 30,
        "min_exec_time_improvement": 0.05,
        "min_p_value": 0.05
    }
}