{
  "metadata": {
    "collection_date": "2026-02-03T20:01:44.104256",
    "repository": "https://github.com/google/highway",
    "repository_name": "google/highway"
  },
  "commit_info": {
    "old_sha": "2dfbb409dc43524afaf10d3b1ec30b1b00d02d14",
    "new_sha": "92c0c2e8b015a9aae0d54e0779881c410d601c1f",
    "commit_message": [
      "Improve generic implementations of GatherIndexN and ScatterIndexN\n\nWhilst benchmarking https://github.com/numpy/numpy/pull/25781 I realised these were not translated well by the compiler. These implementations make the compiler work less by explicitly using `ExtractLane` and `InsertLane`.\n\nWith these, the NumPy benchmarks show `sin`/`cos` not regressing on AArch64 after migrating to Highway :smile_cat:"
    ],
    "commit_date": "2024-04-12T15:50:54+00:00",
    "patch": [
      "--- hwy/ops/generic_ops-inl.h\n@@ -1,5 +1,5 @@\n // Copyright 2021 Google LLC\n-// Copyright 2023 Arm Limited and/or its affiliates <open-source-office@arm.com>\n+// Copyright 2023,2024 Arm Limited and/or its affiliates <open-source-office@arm.com> \n // SPDX-License-Identifier: Apache-2.0\n // SPDX-License-Identifier: BSD-3-Clause\n //\n@@ -2782,14 +2782,29 @@ template <class D, typename T = TFromD<D>>\n HWY_API void ScatterIndexN(VFromD<D> v, D d, T* HWY_RESTRICT base,\n                            VFromD<RebindToSigned<D>> index,\n                            const size_t max_lanes_to_store) {\n-  MaskedScatterIndex(v, FirstN(d, max_lanes_to_store), d, base, index);\n+  const RebindToSigned<decltype(d)> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_store) base[ExtractLane(index, i)] = ExtractLane(v, i);\n+  }\n }\n \n template <class D, typename T = TFromD<D>>\n HWY_API VFromD<D> GatherIndexN(D d, const T* HWY_RESTRICT base,\n                                VFromD<RebindToSigned<D>> index,\n                                const size_t max_lanes_to_load) {\n-  return MaskedGatherIndex(FirstN(d, max_lanes_to_load), d, base, index);\n+  const RebindToSigned<D> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  VFromD<D> v = Zero(d);\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_load)\n+      v = InsertLane(v, i, base[ExtractLane(index, i)]);\n+  }\n+  return v;\n }\n \n // ------------------------------ Integer AbsDiff and SumsOf8AbsDiff"
    ],
    "files_changed": [
      {
        "filename": "hwy/ops/generic_ops-inl.h",
        "status": "modified",
        "additions": 18,
        "deletions": 3,
        "changes": 21,
        "patch": "@@ -1,5 +1,5 @@\n // Copyright 2021 Google LLC\n-// Copyright 2023 Arm Limited and/or its affiliates <open-source-office@arm.com>\n+// Copyright 2023,2024 Arm Limited and/or its affiliates <open-source-office@arm.com> \n // SPDX-License-Identifier: Apache-2.0\n // SPDX-License-Identifier: BSD-3-Clause\n //\n@@ -2782,14 +2782,29 @@ template <class D, typename T = TFromD<D>>\n HWY_API void ScatterIndexN(VFromD<D> v, D d, T* HWY_RESTRICT base,\n                            VFromD<RebindToSigned<D>> index,\n                            const size_t max_lanes_to_store) {\n-  MaskedScatterIndex(v, FirstN(d, max_lanes_to_store), d, base, index);\n+  const RebindToSigned<decltype(d)> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_store) base[ExtractLane(index, i)] = ExtractLane(v, i);\n+  }\n }\n \n template <class D, typename T = TFromD<D>>\n HWY_API VFromD<D> GatherIndexN(D d, const T* HWY_RESTRICT base,\n                                VFromD<RebindToSigned<D>> index,\n                                const size_t max_lanes_to_load) {\n-  return MaskedGatherIndex(FirstN(d, max_lanes_to_load), d, base, index);\n+  const RebindToSigned<D> di;\n+  using TI = TFromD<decltype(di)>;\n+  static_assert(sizeof(T) == sizeof(TI), \"Index/lane size must match\");\n+\n+  VFromD<D> v = Zero(d);\n+  for (size_t i = 0; i < MaxLanes(d); ++i) {\n+    if (i < max_lanes_to_load)\n+      v = InsertLane(v, i, base[ExtractLane(index, i)]);\n+  }\n+  return v;\n }\n \n // ------------------------------ Integer AbsDiff and SumsOf8AbsDiff"
      }
    ],
    "lines_added": 18,
    "lines_removed": 3
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DHWY_ENABLE_TESTS=ON -DBUILD_TESTING=ON",
      "cmake --build /test_workspace/workspace/old/build -- -j 1"
    ],
    "new_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DHWY_ENABLE_TESTS=ON -DBUILD_TESTING=ON",
      "cmake --build /test_workspace/workspace/new/build -- -j 1"
    ],
    "old_test_script": [
      "cd /test_workspace/workspace/old/build",
      "ctest --output-on-failure"
    ],
    "new_test_script": [
      "cd /test_workspace/workspace/new/build",
      "ctest --output-on-failure"
    ],
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 1.0,
    "is_pair_significant": false,
    "pair_p_value": 1.0,
    "is_binom_significant": false,
    "binom_p_value": 1.0,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999991333466779,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.08117000305037786,
    "relative_improvement": 0.0026737639220122296,
    "absolute_improvement_ms": 145.00000000001023,
    "old_mean_ms": 54230.66666666667,
    "new_mean_ms": 54085.666666666664,
    "old_std_ms": 475.46661896196895,
    "new_std_ms": 461.23285564499446,
    "effect_size_cohens_d": 0.30956195877343123,
    "old_ci95_ms": [
      54053.12451332265,
      54408.208820010695
    ],
    "new_ci95_ms": [
      53913.43948789436,
      54257.893845438964
    ],
    "old_ci99_ms": [
      53991.390509748446,
      54469.9428235849
    ],
    "new_ci99_ms": [
      53853.55357871931,
      54317.779754614014
    ],
    "new_times_s": [
      53.22,
      54.31,
      54.26,
      53.89,
      54.13,
      53.14,
      53.88,
      53.98,
      53.27,
      53.53,
      53.8,
      54.02,
      54.5,
      54.09,
      54.0,
      54.51,
      53.95,
      53.42,
      54.04,
      54.67,
      54.17,
      53.76,
      54.3,
      54.2,
      54.28,
      55.19,
      54.41,
      54.73,
      53.51,
      53.82,
      54.81
    ],
    "old_times_s": [
      55.28,
      54.2,
      54.14,
      53.81,
      54.32,
      54.39,
      53.58,
      53.32,
      54.07,
      53.39,
      54.34,
      54.62,
      54.42,
      54.03,
      54.66,
      55.15,
      54.21,
      53.54,
      54.24,
      54.23,
      53.49,
      55.2,
      54.32,
      53.95,
      54.67,
      54.38,
      54.72,
      54.42,
      54.87,
      53.89,
      54.35
    ]
  },
  "tests": {
    "total_tests": 4,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "AbortDeathTest.AbortDefault",
        "is_significant": false,
        "p_value": 0.924138757109663,
        "is_pair_significant": false,
        "pair_p_value": 0.9131585379680052,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999962747097,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999950727222319,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.7287867938379904,
        "relative_improvement": -0.03448275862068969,
        "absolute_improvement_ms": -0.357142857142858,
        "old_mean_ms": 10.357142857142858,
        "new_mean_ms": 10.714285714285715,
        "old_std_ms": 1.8898223650461365,
        "new_std_ms": 2.62265264156481,
        "effect_size_cohens_d": -0.15624434890323363,
        "old_ci95_ms": [
          9.624346244114186,
          11.08993947017153
        ],
        "new_ci95_ms": [
          9.697327185041898,
          11.731244243529535
        ],
        "old_ci99_ms": [
          9.367613229599403,
          11.346672484686314
        ],
        "new_ci99_ms": [
          9.341038926871319,
          12.087532501700114
        ],
        "new_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01
        ],
        "old_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ]
      },
      {
        "test_name": "NanobenchmarkTest.RunTest",
        "is_significant": false,
        "p_value": 0.9958587765306268,
        "is_pair_significant": false,
        "pair_p_value": 0.9980047823743183,
        "is_binom_significant": false,
        "binom_p_value": 0.9937295243144035,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9980881155000525,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.9186406179737345,
        "relative_improvement": -0.04979919678714868,
        "absolute_improvement_ms": -22.14285714285713,
        "old_mean_ms": 444.6428571428571,
        "new_mean_ms": 466.7857142857142,
        "old_std_ms": 57.95797601820637,
        "new_std_ms": 65.49263862668623,
        "effect_size_cohens_d": -0.35806592936477677,
        "old_ci95_ms": [
          422.1691001857572,
          467.116614099957
        ],
        "new_ci95_ms": [
          441.3903201726941,
          492.1811083987344
        ],
        "old_ci99_ms": [
          414.2954893249997,
          474.9902249607145
        ],
        "new_ci99_ms": [
          432.4931228201027,
          501.07830575132584
        ],
        "new_times": [
          0.37,
          0.53,
          0.42,
          0.48,
          0.54,
          0.39,
          0.42,
          0.49,
          0.42,
          0.56,
          0.49,
          0.48,
          0.59,
          0.51,
          0.33,
          0.45,
          0.45,
          0.53,
          0.49,
          0.47,
          0.58,
          0.37,
          0.48,
          0.47,
          0.51,
          0.45,
          0.39,
          0.41
        ],
        "old_times": [
          0.46,
          0.6,
          0.49,
          0.39,
          0.43,
          0.42,
          0.47,
          0.49,
          0.43,
          0.47,
          0.53,
          0.44,
          0.51,
          0.5,
          0.51,
          0.35,
          0.41,
          0.47,
          0.47,
          0.38,
          0.41,
          0.42,
          0.42,
          0.44,
          0.44,
          0.4,
          0.35,
          0.35
        ]
      },
      {
        "test_name": "ThreadPoolTest.TestPool",
        "is_significant": false,
        "p_value": 0.924138757109663,
        "is_pair_significant": false,
        "pair_p_value": 0.9131585379680053,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999962747097,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999950727222319,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.7287867938379904,
        "relative_improvement": -0.03448275862068969,
        "absolute_improvement_ms": -0.357142857142858,
        "old_mean_ms": 10.357142857142858,
        "new_mean_ms": 10.714285714285715,
        "old_std_ms": 1.8898223650461363,
        "new_std_ms": 2.6226526415648106,
        "effect_size_cohens_d": -0.15624434890323363,
        "old_ci95_ms": [
          9.624346244114186,
          11.08993947017153
        ],
        "new_ci95_ms": [
          9.697327185041898,
          11.731244243529535
        ],
        "old_ci99_ms": [
          9.367613229599403,
          11.346672484686314
        ],
        "new_ci99_ms": [
          9.341038926871319,
          12.087532501700114
        ],
        "new_times": [
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ],
        "old_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02
        ]
      },
      {
        "test_name": "ThreadPoolTest.TestCounter",
        "is_significant": false,
        "p_value": 0.5715533996202747,
        "is_pair_significant": false,
        "pair_p_value": 0.5749912228588502,
        "is_binom_significant": false,
        "binom_p_value": 0.9821509309113026,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.7964587633180652,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.26473765293154894,
        "relative_improvement": 0.04081632653061228,
        "absolute_improvement_ms": 1.4285714285714248,
        "old_mean_ms": 35.0,
        "new_mean_ms": 33.57142857142858,
        "old_std_ms": 7.934920476158723,
        "new_std_ms": 5.587211398983506,
        "effect_size_cohens_d": 0.2081794509266507,
        "old_ci95_ms": [
          31.923159045459276,
          38.076840954540735
        ],
        "new_ci95_ms": [
          31.404934161595328,
          35.737922981261825
        ],
        "old_ci99_ms": [
          30.84519738543332,
          39.154802614566684
        ],
        "new_ci99_ms": [
          30.645909582500895,
          36.49694756035626
        ],
        "new_times": [
          0.02,
          0.03,
          0.03,
          0.03,
          0.04,
          0.04,
          0.04,
          0.03,
          0.03,
          0.03,
          0.04,
          0.03,
          0.03,
          0.03,
          0.03,
          0.03,
          0.03,
          0.04,
          0.04,
          0.04,
          0.04,
          0.03,
          0.03,
          0.04,
          0.04,
          0.03,
          0.03,
          0.04
        ],
        "old_times": [
          0.03,
          0.02,
          0.03,
          0.03,
          0.05,
          0.04,
          0.03,
          0.04,
          0.05,
          0.02,
          0.03,
          0.03,
          0.03,
          0.04,
          0.04,
          0.05,
          0.03,
          0.03,
          0.04,
          0.03,
          0.04,
          0.04,
          0.03,
          0.04,
          0.04,
          0.03,
          0.04,
          0.03
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}