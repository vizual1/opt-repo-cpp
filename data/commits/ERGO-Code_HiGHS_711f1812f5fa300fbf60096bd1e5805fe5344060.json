{
  "metadata": {
    "collection_date": "2026-02-03T20:00:29.175745",
    "repository": "https://github.com/ERGO-Code/HiGHS",
    "repository_name": "ERGO-Code/HiGHS"
  },
  "commit_info": {
    "old_sha": "4fc9730f9ce943ed5f38f86ea0157d7e4beefc64",
    "new_sha": "711f1812f5fa300fbf60096bd1e5805fe5344060",
    "commit_message": [
      "Added time limit to HPresolve::removeDependentEquations"
    ],
    "commit_date": "2022-11-18T20:50:01+00:00",
    "patch": [
      "--- src/presolve/HPresolve.cpp\n@@ -4324,14 +4324,28 @@ HPresolve::Result HPresolve::removeDependentEquations(\n   // Set up a time limit to prevent the redundant rows factorization\n   // taking forever.\n   //\n+  // Allow no more than 1% of the time limit to be spent on removing\n+  // dependent equations, but ensure that there is some limit since\n+  // options->time_limit is infinity by default\n+  //\n   // ToDo: This is strictly non-deterministic, but so conservative\n   // that it'll only reap the cases when factor.build never finishes\n-  const double time_limit = std::max(10.0, options->time_limit / 1000);\n+  const double time_limit = std::min(0.01 * options->time_limit, 1000.0);\n   factor.setTimeLimit(time_limit);\n   // Determine rank deficiency of the equations\n-  HighsInt rank_deficiency = factor.build();\n-  // Must not have timed out\n-  assert(rank_deficiency >= 0);\n+  HighsInt build_return = factor.build();\n+  if (build_return == kBuildKernelReturnTimeout) {\n+    // HFactor::build has timed out, so just return\n+    highsLogDev(options->log_options, HighsLogType::kWarning,\n+                \"HPresolve::removeDependentEquations Timed out\\n\");\n+    analysis_.logging_on_ = logging_on;\n+    if (logging_on)\n+      analysis_.stopPresolveRuleLog(kPresolveRuleDependentFreeCols);\n+    return Result::kOk;\n+  }\n+  // build_return as rank_deficiency must be valid\n+  assert(build_return >= 0);\n+  const HighsInt rank_deficiency = build_return;\n   // Analyse what's been removed\n   HighsInt num_removed_row = 0;\n   HighsInt num_removed_nz = 0;\n@@ -4421,6 +4435,10 @@ HPresolve::Result HPresolve::removeDependentFreeCols(\n   HighsInt rank_deficiency = factor.build();\n   // Must not have timed out\n   assert(rank_deficiency >= 0);\n+  highsLogDev(options->log_options, HighsLogType::kInfo,\n+              \"HPresolve::removeDependentFreeCols Got %d free cols, checking \"\n+              \"for dependent free cols\\n\",\n+              (int)matrix.num_col_);\n   // Analyse what's been removed\n   HighsInt num_removed_row = 0;\n   HighsInt num_removed_nz = 0;\n--- src/util/HFactor.cpp\n@@ -880,6 +880,7 @@ HighsInt HFactor::buildKernel() {\n   const bool progress_report = false;  // num_basic != num_row;\n   const HighsInt progress_frequency = 10000;\n   const HighsInt timer_frequency = 100;\n+  const bool check_for_timeout = this->time_limit_ < kHighsInf;\n   HighsInt search_k = 0;\n \n   const HighsInt check_nwork = -11;\n@@ -888,16 +889,10 @@ HighsInt HFactor::buildKernel() {\n     if (nwork == check_nwork) {\n       reportAsm();\n     }\n-\n-    if (search_k % timer_frequency == 0) {\n-      // Detemine whether to return due to excee`<ding the time limit\n-      double local_build_time = build_timer_->readRunHighsClock();\n-      if (local_build_time > this->time_limit_) {\n-        printf(\"HFactor::local_build_time(buildKernel - search_k = %9d) = %g\\n\",\n-               int(search_k), local_build_time);\n+    // Detemine whether to return due to exceeding the time limit\n+    if (check_for_timeout && search_k % timer_frequency == 0)\n+      if (build_timer_->readRunHighsClock() > this->time_limit_)\n         return kBuildKernelReturnTimeout;\n-      }\n-    }\n \n     /**\n      * 1. Search for the pivot"
    ],
    "files_changed": [
      {
        "filename": "src/presolve/HPresolve.cpp",
        "status": "modified",
        "additions": 22,
        "deletions": 4,
        "changes": 26,
        "patch": "@@ -4324,14 +4324,28 @@ HPresolve::Result HPresolve::removeDependentEquations(\n   // Set up a time limit to prevent the redundant rows factorization\n   // taking forever.\n   //\n+  // Allow no more than 1% of the time limit to be spent on removing\n+  // dependent equations, but ensure that there is some limit since\n+  // options->time_limit is infinity by default\n+  //\n   // ToDo: This is strictly non-deterministic, but so conservative\n   // that it'll only reap the cases when factor.build never finishes\n-  const double time_limit = std::max(10.0, options->time_limit / 1000);\n+  const double time_limit = std::min(0.01 * options->time_limit, 1000.0);\n   factor.setTimeLimit(time_limit);\n   // Determine rank deficiency of the equations\n-  HighsInt rank_deficiency = factor.build();\n-  // Must not have timed out\n-  assert(rank_deficiency >= 0);\n+  HighsInt build_return = factor.build();\n+  if (build_return == kBuildKernelReturnTimeout) {\n+    // HFactor::build has timed out, so just return\n+    highsLogDev(options->log_options, HighsLogType::kWarning,\n+                \"HPresolve::removeDependentEquations Timed out\\n\");\n+    analysis_.logging_on_ = logging_on;\n+    if (logging_on)\n+      analysis_.stopPresolveRuleLog(kPresolveRuleDependentFreeCols);\n+    return Result::kOk;\n+  }\n+  // build_return as rank_deficiency must be valid\n+  assert(build_return >= 0);\n+  const HighsInt rank_deficiency = build_return;\n   // Analyse what's been removed\n   HighsInt num_removed_row = 0;\n   HighsInt num_removed_nz = 0;\n@@ -4421,6 +4435,10 @@ HPresolve::Result HPresolve::removeDependentFreeCols(\n   HighsInt rank_deficiency = factor.build();\n   // Must not have timed out\n   assert(rank_deficiency >= 0);\n+  highsLogDev(options->log_options, HighsLogType::kInfo,\n+              \"HPresolve::removeDependentFreeCols Got %d free cols, checking \"\n+              \"for dependent free cols\\n\",\n+              (int)matrix.num_col_);\n   // Analyse what's been removed\n   HighsInt num_removed_row = 0;\n   HighsInt num_removed_nz = 0;"
      },
      {
        "filename": "src/util/HFactor.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 9,
        "changes": 13,
        "patch": "@@ -880,6 +880,7 @@ HighsInt HFactor::buildKernel() {\n   const bool progress_report = false;  // num_basic != num_row;\n   const HighsInt progress_frequency = 10000;\n   const HighsInt timer_frequency = 100;\n+  const bool check_for_timeout = this->time_limit_ < kHighsInf;\n   HighsInt search_k = 0;\n \n   const HighsInt check_nwork = -11;\n@@ -888,16 +889,10 @@ HighsInt HFactor::buildKernel() {\n     if (nwork == check_nwork) {\n       reportAsm();\n     }\n-\n-    if (search_k % timer_frequency == 0) {\n-      // Detemine whether to return due to excee`<ding the time limit\n-      double local_build_time = build_timer_->readRunHighsClock();\n-      if (local_build_time > this->time_limit_) {\n-        printf(\"HFactor::local_build_time(buildKernel - search_k = %9d) = %g\\n\",\n-               int(search_k), local_build_time);\n+    // Detemine whether to return due to exceeding the time limit\n+    if (check_for_timeout && search_k % timer_frequency == 0)\n+      if (build_timer_->readRunHighsClock() > this->time_limit_)\n         return kBuildKernelReturnTimeout;\n-      }\n-    }\n \n     /**\n      * 1. Search for the pivot"
      }
    ],
    "lines_added": 26,
    "lines_removed": 13
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON",
      "cmake --build /test_workspace/workspace/old/build -- -j 1"
    ],
    "new_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON",
      "cmake --build /test_workspace/workspace/new/build -- -j 1"
    ],
    "old_test_script": [
      "cd /test_workspace/workspace/old/build",
      "ctest --output-on-failure"
    ],
    "new_test_script": [
      "cd /test_workspace/workspace/new/build",
      "ctest --output-on-failure"
    ],
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 0.8912048278170428,
    "is_pair_significant": false,
    "pair_p_value": 0.9992328866305396,
    "is_binom_significant": false,
    "binom_p_value": 0.9999957848340273,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999150512740016,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.5616825498430026,
    "relative_improvement": 0.0009155511587252389,
    "absolute_improvement_ms": 198.66666666666788,
    "old_mean_ms": 216991.33333333334,
    "new_mean_ms": 216792.66666666666,
    "old_std_ms": 37338.28715696654,
    "new_std_ms": 30512.648359083116,
    "effect_size_cohens_d": 0.005826566447819577,
    "old_ci95_ms": [
      203048.98777288588,
      230933.67889378077
    ],
    "new_ci95_ms": [
      205399.05652064306,
      228186.27681269025
    ],
    "old_ci99_ms": [
      198201.0302909601,
      235781.63637570656
    ],
    "new_ci99_ms": [
      201437.33162191033,
      232148.001711423
    ],
    "new_times_s": [
      482.55,
      221.05,
      227.05,
      301.2,
      225.36,
      227.56,
      207.34,
      218.57,
      206.64,
      225.12,
      229.03,
      230.17,
      214.78,
      215.44,
      212.8,
      230.13,
      235.8,
      234.06,
      219.6,
      213.11,
      218.84,
      218.39,
      227.32,
      288.71,
      217.23,
      166.01,
      167.86,
      166.76,
      164.76,
      206.35,
      166.74
    ],
    "old_times_s": [
      209.24,
      220.03,
      218.91,
      302.66,
      217.95,
      219.38,
      221.56,
      217.84,
      213.83,
      218.15,
      231.21,
      223.53,
      230.99,
      216.52,
      215.79,
      215.97,
      236.93,
      284.88,
      225.31,
      213.09,
      221.12,
      223.9,
      226.49,
      318.63,
      165.28,
      166.31,
      165.95,
      167.19,
      166.89,
      178.15,
      165.3
    ]
  },
  "tests": {
    "total_tests": 3,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 1,
    "significant_regressions_tests": [
      "capi_unit_tests"
    ],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 1,
    "significant_mannwhitney_regressions_tests": [
      "capi_unit_tests"
    ],
    "tests": [
      {
        "test_name": "capi_unit_tests",
        "is_significant": false,
        "p_value": 0.9984756919865463,
        "is_pair_significant": false,
        "pair_p_value": 0.9974166276838422,
        "is_binom_significant": false,
        "binom_p_value": 0.9995438829064369,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9961509728202377,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.9939923884699319,
        "relative_improvement": -0.18818681318681318,
        "absolute_improvement_ms": -48.92857142857143,
        "old_mean_ms": 260.0,
        "new_mean_ms": 308.92857142857144,
        "old_std_ms": 67.16480559869962,
        "new_std_ms": 83.7252687957503,
        "effect_size_cohens_d": -0.6446616671674112,
        "old_ci95_ms": [
          233.95620722466438,
          286.04379277533565
        ],
        "new_ci95_ms": [
          276.4633013940816,
          341.3938414630613
        ],
        "old_ci99_ms": [
          224.8318454171288,
          295.16815458287124
        ],
        "new_ci99_ms": [
          265.0891949983894,
          352.7679478587535
        ],
        "new_times": [
          0.27,
          0.33,
          0.24,
          0.34,
          0.22,
          0.26,
          0.52,
          0.24,
          0.32,
          0.29,
          0.35,
          0.37,
          0.38,
          0.35,
          0.33,
          0.24,
          0.24,
          0.22,
          0.41,
          0.34,
          0.29,
          0.52,
          0.22,
          0.22,
          0.28,
          0.21,
          0.39,
          0.26
        ],
        "old_times": [
          0.2,
          0.44,
          0.21,
          0.32,
          0.21,
          0.37,
          0.23,
          0.26,
          0.26,
          0.37,
          0.23,
          0.23,
          0.28,
          0.27,
          0.25,
          0.32,
          0.37,
          0.23,
          0.31,
          0.3,
          0.22,
          0.18,
          0.23,
          0.19,
          0.2,
          0.2,
          0.22,
          0.18
        ]
      },
      {
        "test_name": "unit-test-build",
        "is_significant": false,
        "p_value": 0.5752833267850982,
        "is_pair_significant": false,
        "pair_p_value": 0.5705838345291657,
        "is_binom_significant": false,
        "binom_p_value": 0.956420723348856,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.6921595490087663,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.3138484446766342,
        "relative_improvement": 0.03735632183908043,
        "absolute_improvement_ms": 9.285714285714286,
        "old_mean_ms": 248.5714285714286,
        "new_mean_ms": 239.28571428571433,
        "old_std_ms": 66.70633740309424,
        "new_std_ms": 59.87199750013427,
        "effect_size_cohens_d": 0.14650546271197495,
        "old_ci95_ms": [
          222.7054112035254,
          274.43744593933184
        ],
        "new_ci95_ms": [
          216.06977727764084,
          262.5016512937878
        ],
        "old_ci99_ms": [
          213.6433324571356,
          283.4995246857216
        ],
        "new_ci99_ms": [
          207.93614594406534,
          270.6352826273633
        ],
        "new_times": [
          0.21,
          0.3,
          0.27,
          0.21,
          0.2,
          0.21,
          0.34,
          0.2,
          0.22,
          0.2,
          0.21,
          0.22,
          0.43,
          0.25,
          0.2,
          0.21,
          0.23,
          0.21,
          0.21,
          0.37,
          0.2,
          0.33,
          0.23,
          0.2,
          0.2,
          0.2,
          0.21,
          0.23
        ],
        "old_times": [
          0.32,
          0.33,
          0.24,
          0.45,
          0.21,
          0.2,
          0.21,
          0.28,
          0.22,
          0.35,
          0.21,
          0.27,
          0.26,
          0.21,
          0.27,
          0.21,
          0.41,
          0.2,
          0.2,
          0.2,
          0.2,
          0.21,
          0.2,
          0.2,
          0.23,
          0.2,
          0.24,
          0.23
        ]
      },
      {
        "test_name": "unit_tests_all",
        "is_significant": false,
        "p_value": 0.9789011294053004,
        "is_pair_significant": false,
        "pair_p_value": 0.9963714344054871,
        "is_binom_significant": false,
        "binom_p_value": 0.9995438829064369,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9980864031719793,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.8584443446141308,
        "relative_improvement": -0.0597881408069442,
        "absolute_improvement_ms": -1908.9285714285752,
        "old_mean_ms": 31928.214285714283,
        "new_mean_ms": 33837.142857142855,
        "old_std_ms": 6257.686268411228,
        "new_std_ms": 6638.120470904652,
        "effect_size_cohens_d": -0.29592541121783233,
        "old_ci95_ms": [
          29501.736862384692,
          34354.69170904388
        ],
        "new_ci95_ms": [
          31263.148450088378,
          36411.137264197336
        ],
        "old_ci99_ms": [
          28651.62804301015,
          35204.80052841842
        ],
        "new_ci99_ms": [
          30361.357514215928,
          37312.92820006979
        ],
        "new_times": [
          36.2,
          47.33,
          33.06,
          31.86,
          31.21,
          31.58,
          43.88,
          31.82,
          33.5,
          36.16,
          32.65,
          34.96,
          36.71,
          39.43,
          35.62,
          32.98,
          34.94,
          35.57,
          32.26,
          42.63,
          40.17,
          42.39,
          22.49,
          23.07,
          23.1,
          22.32,
          37.06,
          22.49
        ],
        "old_times": [
          33.04,
          36.96,
          32.94,
          40.6,
          35.74,
          30.25,
          32.34,
          34.11,
          33.12,
          43.74,
          33.16,
          31.13,
          40.1,
          32.75,
          33.51,
          33.56,
          36.74,
          30.91,
          32.63,
          43.14,
          32.67,
          21.91,
          22.74,
          22.84,
          23.06,
          24.86,
          22.65,
          22.79
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}