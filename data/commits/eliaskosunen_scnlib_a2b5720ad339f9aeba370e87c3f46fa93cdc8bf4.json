{
  "metadata": {
    "collection_date": "2026-02-03T20:00:22.066502",
    "repository": "https://github.com/eliaskosunen/scnlib",
    "repository_name": "eliaskosunen/scnlib"
  },
  "commit_info": {
    "old_sha": "adf07a7cefe94c68549eda16a217e2c5296b2bc6",
    "new_sha": "a2b5720ad339f9aeba370e87c3f46fa93cdc8bf4",
    "commit_message": [
      "special-casing contiguous ranges for optimization purposes"
    ],
    "commit_date": "2023-12-23T00:09:31+00:00",
    "patch": [
      "--- src/scn/impl/reader/reader.h\n@@ -109,6 +109,18 @@ namespace scn {\n             {\n                 if constexpr (!detail::is_type_disabled<T>) {\n                     auto rd = make_reader<T, char_type>();\n+                    if (is_segment_contiguous(range)) {\n+                        auto crange = get_as_contiguous(range);\n+                        SCN_TRY(it, skip_ws_before_if_required(\n+                                        rd.skip_ws_before_read(), crange, loc));\n+                        SCN_TRY_ASSIGN(\n+                            it,\n+                            rd.read_default(ranges::subrange{it, crange.end()},\n+                                            value, loc))\n+                        return ranges_polyfill::batch_next(\n+                            ranges::begin(range),\n+                            ranges::distance(crange.begin(), it));\n+                    }\n                     SCN_TRY(it, skip_ws_before_if_required(\n                                     rd.skip_ws_before_read(), range, loc));\n                     return rd.read_default(\n@@ -156,17 +168,27 @@ namespace scn {\n             {\n                 if constexpr (!detail::is_type_disabled<T>) {\n                     auto rd = make_reader<T, char_type>();\n-                    if (auto e = rd.check_specs(specs); !e) {\n+                    if (auto e = rd.check_specs(specs); SCN_UNLIKELY(!e)) {\n                         return unexpected(e);\n                     }\n \n-                    auto it = skip_ws_before_if_required(\n-                        rd.skip_ws_before_read(), range, loc);\n-                    if (SCN_UNLIKELY(!it)) {\n-                        return unexpected(it.error());\n+                    if (is_segment_contiguous(range) && specs.width == 0) {\n+                        auto crange = get_as_contiguous(range);\n+                        SCN_TRY(it, skip_ws_before_if_required(\n+                                        rd.skip_ws_before_read(), crange, loc));\n+                        SCN_TRY_ASSIGN(\n+                            it,\n+                            rd.read_specs(ranges::subrange{it, crange.end()},\n+                                          specs, value, loc))\n+                        return ranges_polyfill::batch_next(\n+                            ranges::begin(range),\n+                            ranges::distance(crange.begin(), it));\n                     }\n \n-                    auto subr = ranges::subrange{*it, ranges::end(range)};\n+                    SCN_TRY(it, skip_ws_before_if_required(\n+                                    rd.skip_ws_before_read(), range, loc));\n+\n+                    auto subr = ranges::subrange{it, ranges::end(range)};\n                     if (specs.width != 0) {\n                         SCN_TRY(w_it,\n                                 rd.read_specs(take_width(subr, specs.width),\n--- src/scn/impl/reader/regex_reader.h\n@@ -123,12 +123,20 @@ namespace scn {\n         }\n #endif\n \n-        template <typename CharT>\n-        auto read_regex_string_impl(std::basic_string_view<CharT> pattern,\n+        template <typename CharT, typename Pattern, typename Input>\n+        auto read_regex_string_impl(Pattern pattern,\n                                     detail::regex_flags flags,\n-                                    std::basic_string_view<CharT> input)\n-            -> scan_expected<typename std::basic_string_view<CharT>::iterator>\n+                                    Input input)\n+            -> scan_expected<ranges::iterator_t<Input>>\n         {\n+            static_assert(\n+                ranges::contiguous_range<Pattern> &&\n+                ranges::borrowed_range<Pattern> &&\n+                std::is_same_v<ranges::range_value_t<Pattern>, CharT>);\n+            static_assert(ranges::contiguous_range<Input> &&\n+                          ranges::borrowed_range<Input> &&\n+                          std::is_same_v<ranges::range_value_t<Input>, CharT>);\n+\n #if SCN_REGEX_BACKEND == SCN_REGEX_BACKEND_STD\n             std::basic_regex<CharT> re{};\n             try {\n@@ -238,13 +246,21 @@ namespace scn {\n #endif\n         }\n \n-        template <typename CharT>\n-        auto read_regex_matches_impl(std::basic_string_view<CharT> pattern,\n+        template <typename CharT, typename Pattern, typename Input>\n+        auto read_regex_matches_impl(Pattern pattern,\n                                      detail::regex_flags flags,\n-                                     std::basic_string_view<CharT> input,\n+                                     Input input,\n                                      basic_regex_matches<CharT>& value)\n-            -> scan_expected<typename std::basic_string_view<CharT>::iterator>\n+            -> scan_expected<ranges::iterator_t<Input>>\n         {\n+            static_assert(\n+                ranges::contiguous_range<Pattern> &&\n+                ranges::borrowed_range<Pattern> &&\n+                std::is_same_v<ranges::range_value_t<Pattern>, CharT>);\n+            static_assert(ranges::contiguous_range<Input> &&\n+                          ranges::borrowed_range<Input> &&\n+                          std::is_same_v<ranges::range_value_t<Input>, CharT>);\n+\n #if SCN_REGEX_BACKEND == SCN_REGEX_BACKEND_STD\n             std::basic_regex<CharT> re{};\n             try {\n--- src/scn/impl/reader/string_reader.h\n@@ -175,7 +175,8 @@ namespace scn {\n                     }\n \n                     auto input = get_as_contiguous(range);\n-                    SCN_TRY(it, read_regex_string_impl(pattern, flags, input));\n+                    SCN_TRY(it, read_regex_string_impl<SourceCharT>(\n+                                    pattern, flags, input));\n                     return ranges_polyfill::batch_next(\n                         ranges::begin(range),\n                         ranges::distance(input.begin(), it));"
    ],
    "files_changed": [
      {
        "filename": "src/scn/impl/reader/reader.h",
        "status": "modified",
        "additions": 28,
        "deletions": 6,
        "changes": 34,
        "patch": "@@ -109,6 +109,18 @@ namespace scn {\n             {\n                 if constexpr (!detail::is_type_disabled<T>) {\n                     auto rd = make_reader<T, char_type>();\n+                    if (is_segment_contiguous(range)) {\n+                        auto crange = get_as_contiguous(range);\n+                        SCN_TRY(it, skip_ws_before_if_required(\n+                                        rd.skip_ws_before_read(), crange, loc));\n+                        SCN_TRY_ASSIGN(\n+                            it,\n+                            rd.read_default(ranges::subrange{it, crange.end()},\n+                                            value, loc))\n+                        return ranges_polyfill::batch_next(\n+                            ranges::begin(range),\n+                            ranges::distance(crange.begin(), it));\n+                    }\n                     SCN_TRY(it, skip_ws_before_if_required(\n                                     rd.skip_ws_before_read(), range, loc));\n                     return rd.read_default(\n@@ -156,17 +168,27 @@ namespace scn {\n             {\n                 if constexpr (!detail::is_type_disabled<T>) {\n                     auto rd = make_reader<T, char_type>();\n-                    if (auto e = rd.check_specs(specs); !e) {\n+                    if (auto e = rd.check_specs(specs); SCN_UNLIKELY(!e)) {\n                         return unexpected(e);\n                     }\n \n-                    auto it = skip_ws_before_if_required(\n-                        rd.skip_ws_before_read(), range, loc);\n-                    if (SCN_UNLIKELY(!it)) {\n-                        return unexpected(it.error());\n+                    if (is_segment_contiguous(range) && specs.width == 0) {\n+                        auto crange = get_as_contiguous(range);\n+                        SCN_TRY(it, skip_ws_before_if_required(\n+                                        rd.skip_ws_before_read(), crange, loc));\n+                        SCN_TRY_ASSIGN(\n+                            it,\n+                            rd.read_specs(ranges::subrange{it, crange.end()},\n+                                          specs, value, loc))\n+                        return ranges_polyfill::batch_next(\n+                            ranges::begin(range),\n+                            ranges::distance(crange.begin(), it));\n                     }\n \n-                    auto subr = ranges::subrange{*it, ranges::end(range)};\n+                    SCN_TRY(it, skip_ws_before_if_required(\n+                                    rd.skip_ws_before_read(), range, loc));\n+\n+                    auto subr = ranges::subrange{it, ranges::end(range)};\n                     if (specs.width != 0) {\n                         SCN_TRY(w_it,\n                                 rd.read_specs(take_width(subr, specs.width),"
      },
      {
        "filename": "src/scn/impl/reader/regex_reader.h",
        "status": "modified",
        "additions": 24,
        "deletions": 8,
        "changes": 32,
        "patch": "@@ -123,12 +123,20 @@ namespace scn {\n         }\n #endif\n \n-        template <typename CharT>\n-        auto read_regex_string_impl(std::basic_string_view<CharT> pattern,\n+        template <typename CharT, typename Pattern, typename Input>\n+        auto read_regex_string_impl(Pattern pattern,\n                                     detail::regex_flags flags,\n-                                    std::basic_string_view<CharT> input)\n-            -> scan_expected<typename std::basic_string_view<CharT>::iterator>\n+                                    Input input)\n+            -> scan_expected<ranges::iterator_t<Input>>\n         {\n+            static_assert(\n+                ranges::contiguous_range<Pattern> &&\n+                ranges::borrowed_range<Pattern> &&\n+                std::is_same_v<ranges::range_value_t<Pattern>, CharT>);\n+            static_assert(ranges::contiguous_range<Input> &&\n+                          ranges::borrowed_range<Input> &&\n+                          std::is_same_v<ranges::range_value_t<Input>, CharT>);\n+\n #if SCN_REGEX_BACKEND == SCN_REGEX_BACKEND_STD\n             std::basic_regex<CharT> re{};\n             try {\n@@ -238,13 +246,21 @@ namespace scn {\n #endif\n         }\n \n-        template <typename CharT>\n-        auto read_regex_matches_impl(std::basic_string_view<CharT> pattern,\n+        template <typename CharT, typename Pattern, typename Input>\n+        auto read_regex_matches_impl(Pattern pattern,\n                                      detail::regex_flags flags,\n-                                     std::basic_string_view<CharT> input,\n+                                     Input input,\n                                      basic_regex_matches<CharT>& value)\n-            -> scan_expected<typename std::basic_string_view<CharT>::iterator>\n+            -> scan_expected<ranges::iterator_t<Input>>\n         {\n+            static_assert(\n+                ranges::contiguous_range<Pattern> &&\n+                ranges::borrowed_range<Pattern> &&\n+                std::is_same_v<ranges::range_value_t<Pattern>, CharT>);\n+            static_assert(ranges::contiguous_range<Input> &&\n+                          ranges::borrowed_range<Input> &&\n+                          std::is_same_v<ranges::range_value_t<Input>, CharT>);\n+\n #if SCN_REGEX_BACKEND == SCN_REGEX_BACKEND_STD\n             std::basic_regex<CharT> re{};\n             try {"
      },
      {
        "filename": "src/scn/impl/reader/string_reader.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "patch": "@@ -175,7 +175,8 @@ namespace scn {\n                     }\n \n                     auto input = get_as_contiguous(range);\n-                    SCN_TRY(it, read_regex_string_impl(pattern, flags, input));\n+                    SCN_TRY(it, read_regex_string_impl<SourceCharT>(\n+                                    pattern, flags, input));\n                     return ranges_polyfill::batch_next(\n                         ranges::begin(range),\n                         ranges::distance(input.begin(), it));"
      }
    ],
    "lines_added": 54,
    "lines_removed": 15
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
      "cmake --build /test_workspace/workspace/old/build -- -j 1"
    ],
    "new_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON",
      "cmake --build /test_workspace/workspace/new/build -- -j 1"
    ],
    "old_test_script": [
      "cd /test_workspace/workspace/old/build",
      "ctest --output-on-failure"
    ],
    "new_test_script": [
      "cd /test_workspace/workspace/new/build",
      "ctest --output-on-failure"
    ],
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 0.41651320184678464,
    "is_pair_significant": false,
    "pair_p_value": 0.41872950614758225,
    "is_binom_significant": false,
    "binom_p_value": 0.991937599144876,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.6211099539317951,
    "is_mannwhitney_significant": true,
    "mannwhitney_p_value": 0.018144436062787393,
    "relative_improvement": 0.05521472392638041,
    "absolute_improvement_ms": 2.9999999999999956,
    "old_mean_ms": 54.33333333333334,
    "new_mean_ms": 51.33333333333335,
    "old_std_ms": 6.789105539243628,
    "new_std_ms": 3.457459036417602,
    "effect_size_cohens_d": 0.5568653427005396,
    "old_ci95_ms": [
      51.79823966188137,
      56.868427004785325
    ],
    "new_ci95_ms": [
      50.04229691154527,
      52.62436975512143
    ],
    "old_ci99_ms": [
      50.91675051225338,
      57.749916154413306
    ],
    "new_ci99_ms": [
      49.59338466408227,
      53.07328200258443
    ],
    "new_times_s": [
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.06,
      0.06,
      0.06,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.06
    ],
    "old_times_s": [
      0.05,
      0.05,
      0.06,
      0.06,
      0.05,
      0.05,
      0.06,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.05,
      0.08,
      0.06,
      0.05,
      0.06,
      0.05,
      0.05,
      0.06,
      0.06,
      0.05,
      0.06,
      0.05,
      0.06,
      0.06,
      0.05
    ]
  },
  "tests": {
    "total_tests": 3,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "scn_tests",
        "is_significant": false,
        "p_value": 0.6802335021793655,
        "is_pair_significant": false,
        "pair_p_value": 0.671848622247605,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999962747097,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.999996441056723,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.16745135054973664,
        "relative_improvement": 0.034482758620689495,
        "absolute_improvement_ms": 0.357142857142858,
        "old_mean_ms": 10.357142857142858,
        "new_mean_ms": 10.0,
        "old_std_ms": 1.8898223650461365,
        "new_std_ms": 0.0,
        "effect_size_cohens_d": 0.26726124191242495,
        "old_ci95_ms": [
          9.624346244114186,
          11.08993947017153
        ],
        "new_ci95_ms": [
          10.0,
          10.0
        ],
        "old_ci99_ms": [
          9.367613229599403,
          11.346672484686314
        ],
        "new_ci99_ms": [
          10.0,
          10.0
        ],
        "new_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ],
        "old_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.02,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ]
      },
      {
        "test_name": "scn_impl_tests",
        "is_significant": false,
        "p_value": 0.9828192808044405,
        "is_pair_significant": false,
        "pair_p_value": 0.9760011506664374,
        "is_binom_significant": false,
        "binom_p_value": 0.9999999962747097,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999952147757805,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.5,
        "relative_improvement": 0.00877192982456141,
        "absolute_improvement_ms": 0.3571428571428545,
        "old_mean_ms": 40.714285714285715,
        "new_mean_ms": 40.35714285714286,
        "old_std_ms": 3.779644730092272,
        "new_std_ms": 1.8898223650461365,
        "effect_size_cohens_d": 0.11952286093343847,
        "old_ci95_ms": [
          39.24869248822837,
          42.179878940343066
        ],
        "new_ci95_ms": [
          39.62434624411419,
          41.08993947017153
        ],
        "old_ci99_ms": [
          38.735226459198806,
          42.693344969372625
        ],
        "new_ci99_ms": [
          39.36761322959941,
          41.34667248468632
        ],
        "new_times": [
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.05
        ],
        "old_times": [
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.06,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04,
          0.04
        ]
      },
      {
        "test_name": "scn_stdin_test",
        "is_significant": false,
        "p_value": 1.0,
        "is_pair_significant": false,
        "pair_p_value": 1.0,
        "is_binom_significant": false,
        "binom_p_value": 1.0,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9999999393422746,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 1.0,
        "relative_improvement": 0.0,
        "absolute_improvement_ms": 0.0,
        "old_mean_ms": 10.0,
        "new_mean_ms": 10.0,
        "old_std_ms": 0.0,
        "new_std_ms": 0.0,
        "effect_size_cohens_d": "NaN",
        "old_ci95_ms": [
          10.0,
          10.0
        ],
        "new_ci95_ms": [
          10.0,
          10.0
        ],
        "old_ci99_ms": [
          10.0,
          10.0
        ],
        "new_ci99_ms": [
          10.0,
          10.0
        ],
        "new_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ],
        "old_times": [
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01,
          0.01
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}