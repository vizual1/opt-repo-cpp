{
  "metadata": {
    "collection_date": "2026-02-03T20:01:33.184274",
    "repository": "https://github.com/google/highway",
    "repository_name": "google/highway"
  },
  "commit_info": {
    "old_sha": "c3215d9a3990ede248faeb67b7301532d9d8e0b5",
    "new_sha": "5186a8d3fff6a86a17c3a49ec8660535beabf9f4",
    "commit_message": [
      "PPC9 Find*True codegen improvement\n\nPiperOrigin-RevId: 550511038"
    ],
    "commit_date": "2023-07-24T11:03:44+00:00",
    "patch": [
      "--- hwy/ops/ppc_vsx-inl.h\n@@ -3763,24 +3763,68 @@ HWY_API size_t CountTrue(D /* tag */, MFromD<D> mask) {\n   return PopCount(detail::BitsFromMask(mask));\n }\n \n-template <class D>\n-HWY_API size_t FindKnownFirstTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API size_t FindKnownFirstTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    return static_cast<size_t>(vec_cntlz_lsbb(bytes.raw)) / sizeof(T);\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   return Num0BitsBelowLS1Bit_Nonzero64(detail::BitsFromMask(mask));\n }\n \n-template <class D>\n-HWY_API intptr_t FindFirstTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API intptr_t FindFirstTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  constexpr size_t kN = 16 / sizeof(T);\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    const size_t idx =\n+        static_cast<size_t>(vec_cntlz_lsbb(bytes.raw)) / sizeof(T);\n+    return idx == kN ? -1 : static_cast<intptr_t>(idx);\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   const uint64_t mask_bits = detail::BitsFromMask(mask);\n   return mask_bits ? intptr_t(Num0BitsBelowLS1Bit_Nonzero64(mask_bits)) : -1;\n }\n \n-template <class D>\n-HWY_API size_t FindKnownLastTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API size_t FindKnownLastTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    const size_t idx =\n+        static_cast<size_t>(vec_cnttz_lsbb(bytes.raw)) / sizeof(T);\n+    return 16 / sizeof(T) - 1 - idx;\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   return 63 - Num0BitsAboveMS1Bit_Nonzero64(detail::BitsFromMask(mask));\n }\n \n-template <class D>\n-HWY_API intptr_t FindLastTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API intptr_t FindLastTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  constexpr size_t kN = 16 / sizeof(T);\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    const size_t idx =\n+        static_cast<size_t>(vec_cnttz_lsbb(bytes.raw)) / sizeof(T);\n+    return idx == kN ? -1 : static_cast<intptr_t>(kN - 1 - idx);\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   const uint64_t mask_bits = detail::BitsFromMask(mask);\n   return mask_bits ? intptr_t(63 - Num0BitsAboveMS1Bit_Nonzero64(mask_bits))\n                    : -1;"
    ],
    "files_changed": [
      {
        "filename": "hwy/ops/ppc_vsx-inl.h",
        "status": "modified",
        "additions": 52,
        "deletions": 8,
        "changes": 60,
        "patch": "@@ -3763,24 +3763,68 @@ HWY_API size_t CountTrue(D /* tag */, MFromD<D> mask) {\n   return PopCount(detail::BitsFromMask(mask));\n }\n \n-template <class D>\n-HWY_API size_t FindKnownFirstTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API size_t FindKnownFirstTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    return static_cast<size_t>(vec_cntlz_lsbb(bytes.raw)) / sizeof(T);\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   return Num0BitsBelowLS1Bit_Nonzero64(detail::BitsFromMask(mask));\n }\n \n-template <class D>\n-HWY_API intptr_t FindFirstTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API intptr_t FindFirstTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  constexpr size_t kN = 16 / sizeof(T);\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    const size_t idx =\n+        static_cast<size_t>(vec_cntlz_lsbb(bytes.raw)) / sizeof(T);\n+    return idx == kN ? -1 : static_cast<intptr_t>(idx);\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   const uint64_t mask_bits = detail::BitsFromMask(mask);\n   return mask_bits ? intptr_t(Num0BitsBelowLS1Bit_Nonzero64(mask_bits)) : -1;\n }\n \n-template <class D>\n-HWY_API size_t FindKnownLastTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API size_t FindKnownLastTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    const size_t idx =\n+        static_cast<size_t>(vec_cnttz_lsbb(bytes.raw)) / sizeof(T);\n+    return 16 / sizeof(T) - 1 - idx;\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   return 63 - Num0BitsAboveMS1Bit_Nonzero64(detail::BitsFromMask(mask));\n }\n \n-template <class D>\n-HWY_API intptr_t FindLastTrue(D /* tag */, MFromD<D> mask) {\n+template <class D, typename T = TFromD<D>>\n+HWY_API intptr_t FindLastTrue(D d, MFromD<D> mask) {\n+// For PPC10, BitsFromMask is already efficient.\n+#if HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  constexpr size_t kN = 16 / sizeof(T);\n+  if (detail::IsFull(d)) {\n+    const Repartition<uint8_t, D> d8;\n+    const auto bytes = BitCast(d8, VecFromMask(d, mask));\n+    const size_t idx =\n+        static_cast<size_t>(vec_cnttz_lsbb(bytes.raw)) / sizeof(T);\n+    return idx == kN ? -1 : static_cast<intptr_t>(kN - 1 - idx);\n+  }\n+#endif  // HWY_PPC_HAVE_9 && !HWY_PPC_HAVE_10\n+  (void)d;\n   const uint64_t mask_bits = detail::BitsFromMask(mask);\n   return mask_bits ? intptr_t(63 - Num0BitsAboveMS1Bit_Nonzero64(mask_bits))\n                    : -1;"
      }
    ],
    "lines_added": 52,
    "lines_removed": 8
  },
  "issues": [],
  "pull_requests": [],
  "build_info": {
    "old_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/old -B /test_workspace/workspace/old/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
      "cmake --build /test_workspace/workspace/old/build -- -j 1"
    ],
    "new_build_script": [
      "apt-get update",
      "cmake -S /test_workspace/workspace/new -B /test_workspace/workspace/new/build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DBUILD_TESTING=ON -DHWY_ENABLE_TESTS=ON",
      "cmake --build /test_workspace/workspace/new/build -- -j 1"
    ],
    "old_test_script": [
      "cd /test_workspace/workspace/old/build",
      "ctest --output-on-failure"
    ],
    "new_test_script": [
      "cd /test_workspace/workspace/new/build",
      "ctest --output-on-failure"
    ],
    "build_system": "cmake"
  },
  "performance_analysis": {
    "is_significant": false,
    "p_value": 0.9999999999999958,
    "is_pair_significant": false,
    "pair_p_value": 0.9999999998650027,
    "is_binom_significant": false,
    "binom_p_value": 0.9999999711290002,
    "is_wilcoxon_significant": false,
    "wilcoxon_p_value": 0.9999999972060323,
    "is_mannwhitney_significant": false,
    "mannwhitney_p_value": 0.43538849488808273,
    "relative_improvement": 0.000975109058249827,
    "absolute_improvement_ms": 19.000000000001904,
    "old_mean_ms": 19485.000000000004,
    "new_mean_ms": 19466.0,
    "old_std_ms": 344.1606481341785,
    "new_std_ms": 380.7488084976941,
    "effect_size_cohens_d": 0.05235369672698522,
    "old_ci95_ms": [
      19356.488301956055,
      19613.51169804395
    ],
    "new_ci95_ms": [
      19323.826058343628,
      19608.173941656376
    ],
    "old_ci99_ms": [
      19311.80290484364,
      19658.197095156367
    ],
    "new_ci99_ms": [
      19274.39009929358,
      19657.609900706422
    ],
    "new_times_s": [
      19.19,
      18.96,
      19.43,
      19.26,
      19.03,
      18.81,
      19.3,
      20.17,
      19.85,
      19.35,
      19.22,
      19.3,
      19.62,
      19.82,
      19.75,
      20.06,
      19.74,
      19.3,
      20.33,
      19.47,
      19.77,
      19.65,
      19.33,
      19.29,
      19.7,
      19.0,
      18.93,
      19.63,
      18.97,
      19.66,
      19.28
    ],
    "old_times_s": [
      19.15,
      20.2,
      18.91,
      19.41,
      19.62,
      19.96,
      19.48,
      19.39,
      19.12,
      19.72,
      19.24,
      19.18,
      20.15,
      19.43,
      19.47,
      19.47,
      18.94,
      19.09,
      19.29,
      19.37,
      19.59,
      19.21,
      19.47,
      19.37,
      19.86,
      19.46,
      19.4,
      19.51,
      19.55,
      20.36,
      19.33
    ]
  },
  "tests": {
    "total_tests": 1,
    "significant_improvements": 0,
    "significant_improvements_tests": [],
    "significant_regressions": 0,
    "significant_regressions_tests": [],
    "significant_pair_improvements": 0,
    "significant_pair_improvements_tests": [],
    "significant_pair_regressions": 0,
    "significant_pair_regressions_tests": [],
    "significant_binom_improvements": 0,
    "significant_binom_improvements_tests": [],
    "significant_binom_regressions": 0,
    "significant_binom_regressions_tests": [],
    "significant_wilcoxon_improvements": 0,
    "significant_wilcoxon_improvements_tests": [],
    "significant_wilcoxon_regressions": 0,
    "significant_wilcoxon_regressions_tests": [],
    "significant_mannwhitney_improvements": 0,
    "significant_mannwhitney_improvements_tests": [],
    "significant_mannwhitney_regressions": 0,
    "significant_mannwhitney_regressions_tests": [],
    "tests": [
      {
        "test_name": "NanobenchmarkTest.RunAll",
        "is_significant": false,
        "p_value": 0.9229202868425738,
        "is_pair_significant": false,
        "pair_p_value": 0.9051519780641826,
        "is_binom_significant": false,
        "binom_p_value": 0.9075333289802074,
        "is_wilcoxon_significant": false,
        "wilcoxon_p_value": 0.9141169823228994,
        "is_mannwhitney_significant": false,
        "mannwhitney_p_value": 0.7416800609851213,
        "relative_improvement": -0.020140105078809145,
        "absolute_improvement_ms": -8.21428571428573,
        "old_mean_ms": 407.8571428571429,
        "new_mean_ms": 416.0714285714286,
        "old_std_ms": 74.50364857370174,
        "new_std_ms": 77.18852753530658,
        "effect_size_cohens_d": -0.10828507534056336,
        "old_ci95_ms": [
          378.96764385295774,
          436.746641861328
        ],
        "new_ci95_ms": [
          386.1408421900137,
          446.00201495284347
        ],
        "old_ci99_ms": [
          368.84629771775656,
          446.86798799652917
        ],
        "new_ci99_ms": [
          375.6547543297863,
          456.4881028130709
        ],
        "new_times": [
          0.59,
          0.32,
          0.47,
          0.47,
          0.44,
          0.33,
          0.37,
          0.43,
          0.43,
          0.24,
          0.41,
          0.32,
          0.42,
          0.48,
          0.5,
          0.34,
          0.45,
          0.43,
          0.37,
          0.5,
          0.5,
          0.46,
          0.45,
          0.31,
          0.5,
          0.42,
          0.36,
          0.34
        ],
        "old_times": [
          0.36,
          0.39,
          0.46,
          0.33,
          0.32,
          0.51,
          0.41,
          0.43,
          0.46,
          0.33,
          0.49,
          0.33,
          0.47,
          0.33,
          0.46,
          0.53,
          0.31,
          0.5,
          0.37,
          0.41,
          0.29,
          0.41,
          0.38,
          0.31,
          0.43,
          0.41,
          0.57,
          0.42
        ]
      }
    ]
  },
  "logs": {
    "full_log_path": "/logs/full.log",
    "config_log_path": "/logs/config.log",
    "build_log_path": "/logs/build.log",
    "test_log_path": "/logs/test.log",
    "build_success": true,
    "test_success": true
  },
  "raw_timing_data": {
    "warmup_runs": 1,
    "measurement_runs": 30,
    "min_exec_time_improvement": 0.05,
    "min_p_value": 0.05
  }
}